{"version":3,"sources":["webpack://yacd/./src/api/configs.ts","webpack://yacd/./src/api/connections.ts","webpack://yacd/./src/api/traffic.js","webpack://yacd/./src/api/version.ts","webpack://yacd/./src/components/about/About.module.css","webpack://yacd/./src/components/about/About.tsx","webpack://yacd/./src/store/index.js","webpack://yacd/./src/hooks/basic.js","webpack://yacd/./src/components/BackendList.module.css","webpack://yacd/./src/components/BackendList.tsx","webpack://yacd/./src/components/APIConfig.module.css","webpack://yacd/./src/components/Field.module.css","webpack://yacd/./src/components/Field.js","webpack://yacd/./src/components/APIConfig.tsx","webpack://yacd/./src/misc/errors.js","webpack://yacd/./src/components/APIDiscovery.module.css","webpack://yacd/./src/components/Modal.js","webpack://yacd/./src/components/APIDiscovery.js","webpack://yacd/./src/components/ErrorBoundaryFallback.module.css","webpack://yacd/./src/components/SvgGithub.js","webpack://yacd/./src/components/ErrorBoundaryFallback.js","webpack://yacd/./src/components/ErrorBoundary.js","webpack://yacd/./src/components/Home.module.css","webpack://yacd/./src/components/Loading.module.css","webpack://yacd/./src/components/Loading.js","webpack://yacd/./src/components/TrafficChart.js","webpack://yacd/./src/components/TrafficNow.module.css","webpack://yacd/./src/components/TrafficNow.js","webpack://yacd/./src/components/Home.js","webpack://yacd/./src/components/Loading2.module.css","webpack://yacd/./src/components/Loading2.js","webpack://yacd/./src/components/Root.module.css","webpack://yacd/./src/components/SideBar.module.css","webpack://yacd/./src/components/SideBar.js","webpack://yacd/./src/components/StyleGuide.js","webpack://yacd/./src/components/Root.js","webpack://yacd/./src/app.js","webpack://yacd/./src/components/Button.module.css","webpack://yacd/./src/components/Button.tsx","webpack://yacd/./src/components/ContentHeader.module.css","webpack://yacd/./src/components/ContentHeader.js","webpack://yacd/./src/components/Input.module.css","webpack://yacd/./src/components/Input.js","webpack://yacd/./src/components/StateProvider.js","webpack://yacd/./src/components/SvgYacd.module.css","webpack://yacd/./src/components/SvgYacd.js","webpack://yacd/./src/components/SwitchThemed.js","webpack://yacd/./src/components/ToggleSwitch.module.css","webpack://yacd/./src/components/ToggleSwitch.js","webpack://yacd/./src/components/shared/Basic.module.css","webpack://yacd/./src/components/shared/Basic.js","webpack://yacd/./src/hooks/useLineChart.js","webpack://yacd/./src/misc/chart.js","webpack://yacd/./src/misc/motion.ts","webpack://yacd/./src/misc/createResource.ts","webpack://yacd/./src/misc/pretty-bytes.js","webpack://yacd/./src/misc/request-helper.ts","webpack://yacd/./src/misc/utils.ts","webpack://yacd/./src/misc/storage.js","webpack://yacd/./src/store/app.js","webpack://yacd/./src/store/configs.js","webpack://yacd/./src/store/logs.js","webpack://yacd/./src/store/modals.js","webpack://yacd/./src/api/proxies.js","webpack://yacd/./src/store/proxies.tsx","webpack://yacd/./src/components/Modal.module.css","webpack://yacd/webpack/runtime/startup prefetch"],"names":["endpoint","fetchConfigs","apiConfig","getURLAndInit","url","init","fetch","configsPatchWorkaround","o","updateConfigs","body","JSON","stringify","method","wsState","subscribers","fetchData","listener","subscribe","buildWebSocketURL","ws","WebSocket","addEventListener","event","s","parse","err","console","log","forEach","f","appendData","data","push","idx","indexOf","splice","closeAllConnections","fetchConns","closeConnById","id","baseURL","textDecoder","TextDecoder","Size","traffic","labels","Array","up","down","size","this","t","Date","l","getMinutes","getSeconds","length","shift","fetched","decoded","parseAndAppend","x","pump","reader","read","then","done","value","str","decode","stream","splits","split","lastSplit","i","_ev","response","ok","getReader","fetchDataWithFetch","fetchVersion","json","res","Version","name","link","version","className","href","target","rel","About","connect","getClashAPIConfig","props","useQuery","suspense","ContentHeader","title","__VERSION__","initialState","app","modals","configs","proxies","logs","actions","selectChartStyleIndex","updateAppConfig","updateCollapsibleIsOpen","removeClashAPIConfig","selectClashAPIConfig","proxiesActions","useState","React","useCallback","BackendList","apiConfigs","getClashAPIConfigs","selectedClashAPIConfigIndex","getSelectedClashAPIConfigIndex","useStoreActions","onRemove","conf","onSelect","map","item","cx","secret","Item","disableRemove","isOn","setState","toggle","useToggle","show","Icon","EyeOff","Eye","handleTap","e","stopPropagation","Button","disabled","onClick","tabIndex","role","onKeyUp","children","Field","label","onChange","valueOnChange","labelClassName","htmlFor","propTypes","PropTypes","type","useRef","dispatch","setBaseURL","setSecret","errMsg","setErrMsg","userTouchedFlagRef","contentEl","handleInputOnChange","current","Error","onConfirm","verify","ret","addClashAPIConfig","handleContentOnKeyDown","Element","tagName","toUpperCase","key","s0","ref","onKeyDown","SvgYacd","width","height","style","URL","prefix","substring","status","statusText","errors","message","detail","default","ModalAPIConfig","isOpen","onRequestClose","overlayClassName","otherProps","contentCls","overlayCls","useEffect","window","code","closeApiConfigModal","closeModal","Modal","shouldCloseOnOverlayClick","shouldCloseOnEsc","SvgGithub","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","ErrorBoundaryFallback","ErrorBoundary","error","state","Component","Loading","chartWrapperStyle","position","maxWidth","selectedChartStyleIndex","getSelectedChartStyleIndex","Chart","chartJSResource","useMemo","datasets","commonDataSetProps","chartStyles","useLineChart","upStr","downStr","speed","setSpeed","prettyBytes","useSpeed","upTotal","dlTotal","connNumber","downloadTotal","uploadTotal","connections","connAPI","useConnection","Home","TrafficNow","Suspense","fallback","TrafficChart","animate","c0","c1","icons","activity","FcAreaChart","globe","FcGlobe","command","FcRuler","file","FcDocument","settings","FcSettings","FcLink","SideBarRow","isActive","to","iconId","labelText","Comp","pages","MoonA","motion","framerMotionResouce","path","initial","rotate","transition","duration","Sun","cy","r","g","scale","x1","y1","x2","y2","theme","getTheme","location","useLocation","switchThemeHooked","switchTheme","pathname","noop","paneStyle","padding","optionsRule","Pane","SwitchExample","onoff","setonoff","handleChange","checked","SwitchThemed","PureComponent","Connections","lazy","Config","Logs","Proxies","Rules","routes","element","filter","Boolean","RouteInnerApp","useRoutes","SideBarApp","Loading2","App","StateProvider","rootEl","document","getElementById","ReactDOM","render","memo","forwardRef","ButtonInternal","text","start","isLoading","kind","restProps","internalOnClick","btnClassName","display","opacity","Input","SelfControlledInput","internalValue","setInternalValue","refValue","placeholder","immer","createContext","useContext","StateContext","DispatchContext","ActionsContext","Provider","stateRef","getState","process","actionId","fn","stateNext","produce","boundActions","bindActions","mapStateToProps","MemoComponent","mapped","nextProps","bindAction","action","args","apply","faceClasName","fillRule","offColor","uncheckedIcon","checkedIcon","onColor","offHandleColor","onHandleColor","handleDiameter","ToggleSwitch","options","idxSelected","getPortionPercentage","w","Math","floor","sliderStyle","left","SectionNameType","LoadingDot","commonChartOptions","elementId","subscription","extraChartOptions","ctx","getContext","c","unsubscribe","update","destroy","createResource","borderWidth","lineTension","pointRadius","responsive","maintainAspectRatio","legend","fontColor","boxWidth","tooltips","enabled","mode","intersect","animationDuration","hover","scales","xAxes","gridLines","yAxes","color","borderDash","drawBorder","ticks","callback","backgroundColor","borderColor","getPromise","cache","inflight","load","val","catch","preload","undefined","clear","UNITS","number","exponent","min","log10","Number","pow","toPrecision","headersCommon","genCommonHeaders","h","headers","qs","encodeURIComponent","protocol","trimTrailingSlash","debounce","timeout","timeoutId","clearTimeout","setTimeout","replace","StorageKey","saveState","serialized","localStorage","setItem","clashAPIConfigs","getLatencyTestUrl","latencyTestUrl","getCollapsibleIsOpen","collapsibleIsOpen","getProxySortBy","proxySortBy","getHideUnavailableProxies","hideUnavailableProxies","getAutoCloseOldConns","autoCloseOldConns","saveStateDebounced","findClashAPIConfigIndex","arr","clashAPIConfig","addedAt","now","slice","reload","bodyElement","setTheme","classList","remove","add","v","defaultState","getItem","loadState","query","search","collector","k","parseConfigQueryString","hostname","port","getConfigs","getLogLevel","configsAPI","openModal","payload","haveFetchedConfig","trafficAPI","partialConfg","getLogs","getTail","tail","getSearchText","searchText","getLogsForDisplay","createSelector","LogSize","toLowerCase","updateSearchText","appendLog","tailCurr","modalName","fetchProxies","config","requestToSwitchProxy","name1","name2","fullURL","requestDelayForProxy","fetchProviderProxies","providers","updateProviderByName","healthcheckProviderByName","delay","groupNames","showModalClosePrevConns","NonProxyTypes","getProxies","getDelay","getProxyGroupNames","getProxyProviders","proxyProviders","getDangleProxyNames","dangleProxyNames","getShowModalClosePrevConns","Promise","all","proxiesAPI","proxiesData","providersData","formatProxyProviders","providerProxies","retrieveGroupNamesFrom","proxyNames","delayPrev","delayNext","history","healthcheckProviderByNameInternal","groupName","exceptionItemName","idsToClose","conn","chains","switchProxyImpl","itemName","closePrevConns","closeModalClosePrevConns","switchTo","chain","child","childKey","unshift","resolveChain","closeGroupConns","switchProxy","requestDelayForProxyOnce","requestDelayAll","p","globalAll","prop","isArray","sort","a","b","group","providersInput","keys","Object","provider","vehicleType","proxiesArr","names","j","proxy","requestDelayForProxies","works","closePrevConnsAndTheModal","switchProxyCtx","proxyFilterText","atom","startup","__webpack_require__","result","E"],"mappings":"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","file":"app.d58caec1b2e4b2f6f6f4.js","sourcesContent":["import { getURLAndInit } from 'src/misc/request-helper';\nimport { ClashAPIConfig } from 'src/types';\n\nconst endpoint = '/configs';\n\nexport async function fetchConfigs(apiConfig: ClashAPIConfig) {\n  const { url, init } = getURLAndInit(apiConfig);\n  return await fetch(url + endpoint, init);\n}\n\n// TODO support PUT /configs\n// req body\n// { Path: string }\n\ntype ClashConfigPartial = { 'socks-port'?: unknown };\nfunction configsPatchWorkaround(o: ClashConfigPartial) {\n  // backward compatibility for older clash  using `socket-port`\n  if ('socks-port' in o) {\n    o['socket-port'] = o['socks-port'];\n  }\n  return o;\n}\n\nexport async function updateConfigs(\n  apiConfig: ClashAPIConfig,\n  o: ClashConfigPartial\n) {\n  const { url, init } = getURLAndInit(apiConfig);\n  const body = JSON.stringify(configsPatchWorkaround(o));\n  return await fetch(url + endpoint, { ...init, body, method: 'PATCH' });\n}\n","import { ClashAPIConfig } from 'src/types';\n\nimport { buildWebSocketURL, getURLAndInit } from '../misc/request-helper';\n\nconst endpoint = '/connections';\n\nconst fetched = false;\nconst subscribers = [];\n\n// see also https://github.com/Dreamacro/clash/blob/dev/constant/metadata.go#L41\ntype UUID = string;\ntype ConnectionItem = {\n  id: UUID;\n  metadata: {\n    network: 'tcp' | 'udp';\n    type: 'HTTP' | 'HTTP Connect' | 'Socks5' | 'Redir' | 'Unknown';\n    sourceIP: string;\n    destinationIP: string;\n    sourcePort: string;\n    destinationPort: string;\n    host: string;\n  };\n  upload: number;\n  download: number;\n  // e.g. \"2019-11-30T22:48:13.416668+08:00\",\n  start: string;\n  chains: Array<string>;\n  // e.g. 'Match', 'DomainKeyword'\n  rule: string;\n};\ntype ConnectionsData = {\n  downloadTotal: number;\n  uploadTotal: number;\n  connections: Array<ConnectionItem>;\n};\n\nfunction appendData(s: string) {\n  let o: ConnectionsData;\n  try {\n    o = JSON.parse(s);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.log('JSON.parse error', JSON.parse(s));\n  }\n  subscribers.forEach((f) => f(o));\n}\n\ntype UnsubscribeFn = () => void;\n\nlet wsState: number;\nexport function fetchData(\n  apiConfig: ClashAPIConfig,\n  listener: unknown\n): UnsubscribeFn | void {\n  if (fetched || wsState === 1) {\n    if (listener) return subscribe(listener);\n  }\n  wsState = 1;\n  const url = buildWebSocketURL(apiConfig, endpoint);\n  const ws = new WebSocket(url);\n  ws.addEventListener('error', () => (wsState = 3));\n  ws.addEventListener('message', (event) => appendData(event.data));\n  if (listener) return subscribe(listener);\n}\n\nfunction subscribe(listener: unknown): UnsubscribeFn {\n  subscribers.push(listener);\n  return function unsubscribe() {\n    const idx = subscribers.indexOf(listener);\n    subscribers.splice(idx, 1);\n  };\n}\n\nexport async function closeAllConnections(apiConfig: ClashAPIConfig) {\n  const { url, init } = getURLAndInit(apiConfig);\n  return await fetch(url + endpoint, { ...init, method: 'DELETE' });\n}\n\nexport async function fetchConns(apiConfig: ClashAPIConfig) {\n  const { url, init } = getURLAndInit(apiConfig);\n  return await fetch(url + endpoint, { ...init });\n}\n\nexport async function closeConnById(apiConfig: ClashAPIConfig, id: string) {\n  const { url: baseURL, init } = getURLAndInit(apiConfig);\n  const url = `${baseURL}${endpoint}/${id}`;\n  return await fetch(url, { ...init, method: 'DELETE' });\n}\n","import { buildWebSocketURL, getURLAndInit } from '../misc/request-helper';\nconst endpoint = '/traffic';\nconst textDecoder = new TextDecoder('utf-8');\n\nconst Size = 150;\n\nconst traffic = {\n  labels: Array(Size),\n  // labels: [],\n  up: Array(Size),\n  down: Array(Size),\n\n  size: Size,\n  subscribers: [],\n  appendData(o) {\n    this.up.push(o.up);\n    this.down.push(o.down);\n    const t = new Date();\n    const l = '' + t.getMinutes() + t.getSeconds();\n    this.labels.push(l);\n    if (this.up.length > this.size) this.up.shift();\n    if (this.down.length > this.size) this.down.shift();\n    if (this.labels.length > this.size) this.labels.shift();\n\n    this.subscribers.forEach((f) => f(o));\n  },\n\n  subscribe(listener) {\n    this.subscribers.push(listener);\n    return () => {\n      const idx = this.subscribers.indexOf(listener);\n      this.subscribers.splice(idx, 1);\n    };\n  },\n};\n\nlet fetched = false;\nlet decoded = '';\n\nfunction parseAndAppend(x) {\n  traffic.appendData(JSON.parse(x));\n}\n\nfunction pump(reader) {\n  return reader.read().then(({ done, value }) => {\n    const str = textDecoder.decode(value, { stream: !done });\n    decoded += str;\n\n    const splits = decoded.split('\\n');\n\n    const lastSplit = splits[splits.length - 1];\n\n    for (let i = 0; i < splits.length - 1; i++) {\n      parseAndAppend(splits[i]);\n    }\n\n    if (done) {\n      parseAndAppend(lastSplit);\n      decoded = '';\n\n      // eslint-disable-next-line no-console\n      console.log('GET /traffic streaming done');\n      fetched = false;\n      return;\n    } else {\n      decoded = lastSplit;\n    }\n    return pump(reader);\n  });\n}\n\n// 1 OPEN\n// other value CLOSED\n// similar to ws readyState but not the same\n// https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/readyState\nlet wsState;\nfunction fetchData(apiConfig) {\n  if (fetched || wsState === 1) return traffic;\n  wsState = 1;\n  const url = buildWebSocketURL(apiConfig, endpoint);\n  const ws = new WebSocket(url);\n  ws.addEventListener('error', function (_ev) {\n    wsState = 3;\n  });\n  ws.addEventListener('close', function (_ev) {\n    wsState = 3;\n    fetchDataWithFetch(apiConfig);\n  });\n  ws.addEventListener('message', function (event) {\n    parseAndAppend(event.data);\n  });\n  return traffic;\n}\n\nfunction fetchDataWithFetch(apiConfig) {\n  if (fetched) return traffic;\n  fetched = true;\n  const { url, init } = getURLAndInit(apiConfig);\n  fetch(url + endpoint, init).then(\n    (response) => {\n      if (response.ok) {\n        const reader = response.body.getReader();\n        pump(reader);\n      } else {\n        fetched = false;\n      }\n    },\n    (err) => {\n      // eslint-disable-next-line no-console\n      console.log('fetch /traffic error', err);\n      fetched = false;\n    }\n  );\n  return traffic;\n}\n\nexport { fetchData };\n","import { getURLAndInit } from 'src/misc/request-helper';\nimport { ClashAPIConfig } from 'src/types';\n\ntype VersionData = {\n  version?: string;\n  premium?: boolean;\n};\n\nexport async function fetchVersion(\n  endpoint: string,\n  apiConfig: ClashAPIConfig\n): Promise<VersionData> {\n  let json = {};\n  try {\n    const { url, init } = getURLAndInit(apiConfig);\n    const res = await fetch(url + endpoint, init);\n    if (res.ok) {\n      json = await res.json();\n    }\n  } catch (err) {\n    // log and ignore\n    // eslint-disable-next-line no-console\n    console.log(`failed to fetch ${endpoint}`, err);\n  }\n  return json;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cHbZy_rAHf\",\"mono\":\"_2SNe_x81Ib\",\"link\":\"LUI6m76ply\"};","import * as React from 'react';\nimport { GitHub } from 'react-feather';\nimport { useQuery } from 'react-query';\nimport { fetchVersion } from 'src/api/version';\nimport ContentHeader from 'src/components/ContentHeader';\nimport { connect } from 'src/components/StateProvider';\nimport { getClashAPIConfig } from 'src/store/app';\nimport { ClashAPIConfig } from 'src/types';\n\nimport s from './About.module.css';\n\ntype Props = { apiConfig: ClashAPIConfig };\n\nfunction Version({\n  name,\n  link,\n  version,\n}: {\n  name: string;\n  link: string;\n  version: string;\n}) {\n  return (\n    <div className={s.root}>\n      <h2>{name}</h2>\n      <p>\n        <span>Version </span>\n        <span className={s.mono}>{version}</span>\n      </p>\n      <p>\n        <a\n          className={s.link}\n          href={link}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <GitHub size={20} />\n          <span>Source</span>\n        </a>\n      </p>\n    </div>\n  );\n}\n\nfunction AboutImpl(props: Props) {\n  const { data: version } = useQuery(\n    ['/version', props.apiConfig],\n    fetchVersion,\n    {\n      suspense: true,\n    }\n  );\n  return (\n    <>\n      <ContentHeader title=\"About\" />\n      {version && version.version ? (\n        <Version\n          name=\"Clash\"\n          version={version.version}\n          link=\"https://github.com/Dreamacro/clash\"\n        />\n      ) : null}\n      <Version\n        name=\"Yacd\"\n        version={__VERSION__}\n        link=\"https://github.com/haishanh/yacd\"\n      />\n    </>\n  );\n}\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n});\n\nexport const About = connect(mapState)(AboutImpl);\n","import {\n  initialState as app,\n  removeClashAPIConfig,\n  selectChartStyleIndex,\n  selectClashAPIConfig,\n  updateAppConfig,\n  updateCollapsibleIsOpen,\n} from './app';\nimport { initialState as configs } from './configs';\nimport { initialState as logs } from './logs';\nimport { initialState as modals } from './modals';\nimport { actions as proxiesActions, initialState as proxies } from './proxies';\n\nexport const initialState = {\n  app: app(),\n  modals,\n  configs,\n  proxies,\n  logs,\n};\n\nexport const actions = {\n  selectChartStyleIndex,\n  updateAppConfig,\n\n  app: {\n    updateCollapsibleIsOpen,\n    updateAppConfig,\n    removeClashAPIConfig,\n    selectClashAPIConfig,\n  },\n  proxies: proxiesActions,\n};\n","import React from 'react';\n\nconst { useState, useCallback } = React;\n\nexport function useToggle(initialValue = false) {\n  const [isOn, setState] = useState(initialValue);\n  const toggle = useCallback(() => setState(x => !x), []);\n  return [isOn, toggle];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"ul\":\"_1MP9tbO2C9\",\"li\":\"_39O4-s-qNw\",\"close\":\"_3U13UgV7Z1\",\"eye\":\"ipx6os2H89\",\"hasSecret\":\"_3GP8CDySTd\",\"url\":\"PK8GjRW5ZI\",\"secret\":\"_2-iwpHoCB6\",\"btn\":\"S1-PNvCcRP\"};","import cx from 'clsx';\nimport * as React from 'react';\nimport { Eye, EyeOff, X as Close } from 'react-feather';\nimport { useToggle } from 'src/hooks/basic';\nimport {\n  getClashAPIConfigs,\n  getSelectedClashAPIConfigIndex,\n} from 'src/store/app';\nimport { ClashAPIConfig } from 'src/types';\n\nimport s from './BackendList.module.css';\nimport { connect, useStoreActions } from './StateProvider';\n\ntype Config = ClashAPIConfig & { addedAt: number };\n\nconst mapState = (s) => ({\n  apiConfigs: getClashAPIConfigs(s),\n  selectedClashAPIConfigIndex: getSelectedClashAPIConfigIndex(s),\n});\n\nexport const BackendList = connect(mapState)(BackendListImpl);\n\nfunction BackendListImpl({\n  apiConfigs,\n  selectedClashAPIConfigIndex,\n}: {\n  apiConfigs: Config[];\n  selectedClashAPIConfigIndex: number;\n}) {\n  const {\n    app: { removeClashAPIConfig, selectClashAPIConfig },\n  } = useStoreActions();\n\n  const onRemove = React.useCallback(\n    (conf: ClashAPIConfig) => {\n      removeClashAPIConfig(conf);\n    },\n    [removeClashAPIConfig]\n  );\n  const onSelect = React.useCallback(\n    (conf: ClashAPIConfig) => {\n      selectClashAPIConfig(conf);\n    },\n    [selectClashAPIConfig]\n  );\n\n  return (\n    <>\n      <ul className={s.ul}>\n        {apiConfigs.map((item, idx) => {\n          return (\n            <li\n              className={cx(s.li, {\n                [s.hasSecret]: item.secret,\n                [s.isSelected]: idx === selectedClashAPIConfigIndex,\n              })}\n              key={item.baseURL + item.secret}\n            >\n              <Item\n                disableRemove={idx === selectedClashAPIConfigIndex}\n                baseURL={item.baseURL}\n                secret={item.secret}\n                onRemove={onRemove}\n                onSelect={onSelect}\n              />\n            </li>\n          );\n        })}\n      </ul>\n    </>\n  );\n}\n\nfunction Item({\n  baseURL,\n  secret,\n  disableRemove,\n  onRemove,\n  onSelect,\n}: {\n  baseURL: string;\n  secret: string;\n  disableRemove: boolean;\n  onRemove: (x: ClashAPIConfig) => void;\n  onSelect: (x: ClashAPIConfig) => void;\n}) {\n  const [show, toggle] = useToggle();\n  const Icon = show ? EyeOff : Eye;\n\n  const handleTap = React.useCallback((e: React.KeyboardEvent) => {\n    e.stopPropagation();\n  }, []);\n\n  return (\n    <>\n      <Button\n        disabled={disableRemove}\n        onClick={() => onRemove({ baseURL, secret })}\n        className={s.close}\n      >\n        <Close size={20} />\n      </Button>\n      <span\n        className={s.url}\n        tabIndex={0}\n        role=\"button\"\n        onClick={() => onSelect({ baseURL, secret })}\n        onKeyUp={handleTap}\n      >\n        {baseURL}\n      </span>\n      <span />\n      {secret ? (\n        <>\n          <span className={s.secret}>{show ? secret : '***'}</span>\n\n          <Button onClick={toggle} className={s.eye}>\n            <Icon size={20} />\n          </Button>\n        </>\n      ) : null}\n    </>\n  );\n}\n\nfunction Button({\n  children,\n  onClick,\n  className,\n  disabled,\n}: {\n  children: React.ReactNode;\n\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => unknown;\n  className: string;\n  disabled?: boolean;\n}) {\n  return (\n    <button\n      disabled={disabled}\n      className={cx(className, s.btn)}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2-70itbuF1\",\"header\":\"JKE-0c5hxF\",\"icon\":\"o2VhY_cs6Z\",\"body\":\"_3QDGxJ_pWs\",\"hostnamePort\":\"tTZzzcEsTA\",\"error\":\"_2cCgtjpQZP\",\"footer\":\"_3OT00Mqmrw\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2uN43zExEi\",\"floatAbove\":\"_2gQ0j5OHC8\"};","import cx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport s from './Field.module.css';\n\nconst { useCallback } = React;\n\nexport default function Field({ id, label, value, onChange, ...props }) {\n  const valueOnChange = useCallback((e) => onChange(e), [onChange]);\n  const labelClassName = cx({\n    [s.floatAbove]: typeof value === 'string' && value !== '',\n  });\n  return (\n    <div className={s.root}>\n      <input id={id} value={value} onChange={valueOnChange} {...props} />\n      <label htmlFor={id} className={labelClassName}>\n        {label}\n      </label>\n    </div>\n  );\n}\n\nField.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  type: PropTypes.oneOf(['text', 'number']),\n  onChange: PropTypes.func,\n  id: PropTypes.string,\n  label: PropTypes.string,\n};\n","import * as React from 'react';\nimport { fetchConfigs } from 'src/api/configs';\nimport { BackendList } from 'src/components/BackendList';\nimport { ClashAPIConfig } from 'src/types';\n\nimport { addClashAPIConfig, getClashAPIConfig } from '../store/app';\nimport s0 from './APIConfig.module.css';\nimport Button from './Button';\nimport Field from './Field';\nimport { connect } from './StateProvider';\nimport SvgYacd from './SvgYacd';\n\nconst { useState, useRef, useCallback } = React;\nconst Ok = 0;\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n});\n\nfunction APIConfig({ dispatch }) {\n  const [baseURL, setBaseURL] = useState('');\n  const [secret, setSecret] = useState('');\n  const [errMsg, setErrMsg] = useState('');\n\n  const userTouchedFlagRef = useRef(false);\n  const contentEl = useRef(null);\n\n  const handleInputOnChange = useCallback((e) => {\n    userTouchedFlagRef.current = true;\n    setErrMsg('');\n    const target = e.target;\n    const { name } = target;\n    const value = target.value;\n    switch (name) {\n      case 'baseURL':\n        setBaseURL(value);\n        break;\n      case 'secret':\n        setSecret(value);\n        break;\n      default:\n        throw new Error(`unknown input name ${name}`);\n    }\n  }, []);\n\n  const onConfirm = useCallback(() => {\n    verify({ baseURL, secret }).then((ret) => {\n      if (ret[0] !== Ok) {\n        setErrMsg(ret[1]);\n      } else {\n        dispatch(addClashAPIConfig({ baseURL, secret }));\n      }\n    });\n  }, [baseURL, secret, dispatch]);\n\n  const handleContentOnKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (\n        e.target instanceof Element &&\n        (!e.target.tagName || e.target.tagName.toUpperCase() !== 'INPUT')\n      ) {\n        return;\n      }\n      if (e.key !== 'Enter') return;\n\n      onConfirm();\n    },\n    [onConfirm]\n  );\n\n  return (\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div className={s0.root} ref={contentEl} onKeyDown={handleContentOnKeyDown}>\n      <div className={s0.header}>\n        <div className={s0.icon}>\n          <SvgYacd width={160} height={160} />\n        </div>\n      </div>\n      <div className={s0.body}>\n        <div className={s0.hostnamePort}>\n          <Field\n            id=\"baseURL\"\n            name=\"baseURL\"\n            label=\"API Base URL\"\n            type=\"text\"\n            value={baseURL}\n            onChange={handleInputOnChange}\n          />\n          <Field\n            id=\"secret\"\n            name=\"secret\"\n            label=\"Secret(optional)\"\n            value={secret}\n            type=\"text\"\n            onChange={handleInputOnChange}\n          />\n        </div>\n      </div>\n      <div className={s0.error}>{errMsg ? errMsg : null}</div>\n      <div className={s0.footer}>\n        <Button label=\"Add\" onClick={onConfirm} />\n      </div>\n      <div style={{ height: 20 }} />\n      <BackendList />\n    </div>\n  );\n}\n\nexport default connect(mapState)(APIConfig);\n\nasync function verify(apiConfig: ClashAPIConfig): Promise<[number, string?]> {\n  try {\n    new URL(apiConfig.baseURL);\n  } catch (e) {\n    if (apiConfig.baseURL) {\n      const prefix = apiConfig.baseURL.substring(0, 7);\n      if (prefix !== 'http://' && prefix !== 'https:/') {\n        return [1, 'Must starts with http:// or https://'];\n      }\n    }\n\n    return [1, 'Invalid URL'];\n  }\n  try {\n    const res = await fetchConfigs(apiConfig);\n    if (res.status > 399) {\n      return [1, res.statusText];\n    }\n    return [Ok];\n  } catch (e) {\n    return [1, 'Failed to connect'];\n  }\n}\n","export const DOES_NOT_SUPPORT_FETCH = 0;\n\nexport const errors = {\n  [DOES_NOT_SUPPORT_FETCH]: {\n    message: 'Browser not supported!',\n    detail: 'This browser does not support \"fetch\", please choose another one.'\n  },\n  default: {\n    message: 'Oops, something went wrong!'\n  }\n};\n\nexport function deriveMessageFromError(err) {\n  const { code } = err;\n  if (typeof code === 'number') {\n    return errors[code];\n  }\n  return errors.default;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_2vs8ks4GvR\",\"container\":\"Z8vSJz0PbL\",\"overlay\":\"EWfRQXOK8M\"};","import cx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Modal from 'react-modal';\n\nimport s0 from './Modal.module.css';\n\nfunction ModalAPIConfig({\n  isOpen,\n  onRequestClose,\n  className,\n  overlayClassName,\n  children,\n  ...otherProps\n}) {\n  const contentCls = cx(className, s0.content);\n  const overlayCls = cx(overlayClassName, s0.overlay);\n  return (\n    <Modal\n      isOpen={isOpen}\n      onRequestClose={onRequestClose}\n      className={contentCls}\n      overlayClassName={overlayCls}\n      {...otherProps}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nModalAPIConfig.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  onRequestClose: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  overlayClassName: PropTypes.string,\n};\n\nexport default React.memo(ModalAPIConfig);\n","import React from 'react';\n\nimport { DOES_NOT_SUPPORT_FETCH, errors } from '../misc/errors';\nimport { getClashAPIConfig } from '../store/app';\nimport { fetchConfigs } from '../store/configs';\nimport { closeModal } from '../store/modals';\nimport APIConfig from './APIConfig';\nimport s0 from './APIDiscovery.module.css';\nimport Modal from './Modal';\nimport { connect } from './StateProvider';\n\nconst { useCallback, useEffect } = React;\n\nfunction APIDiscovery({ dispatch, apiConfig, modals }) {\n  if (!window.fetch) {\n    const { detail } = errors[DOES_NOT_SUPPORT_FETCH];\n    const err = new Error(detail);\n    err.code = DOES_NOT_SUPPORT_FETCH;\n    throw err;\n  }\n\n  const closeApiConfigModal = useCallback(() => {\n    dispatch(closeModal('apiConfig'));\n  }, [dispatch]);\n  useEffect(() => {\n    dispatch(fetchConfigs(apiConfig));\n  }, [dispatch, apiConfig]);\n\n  return (\n    <Modal\n      isOpen={modals.apiConfig}\n      className={s0.content}\n      overlayClassName={s0.overlay}\n      shouldCloseOnOverlayClick={false}\n      shouldCloseOnEsc={false}\n      onRequestClose={closeApiConfigModal}\n    >\n      <div className={s0.container}>\n        <APIConfig />\n      </div>\n    </Modal>\n  );\n}\n\nconst mapState = (s) => ({\n  modals: s.modals,\n  apiConfig: getClashAPIConfig(s),\n});\n\nexport default connect(mapState)(APIDiscovery);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_113JVByWGF\",\"yacd\":\"_1m2ZsnzFvt\",\"link\":\"_3TKFOM4Tgj\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nexport default function SvgGithub({ width = 24, height = 24 } = {}) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={width}\n      height={height}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <path d=\"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22\" />\n    </svg>\n  );\n}\n\nSvgGithub.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport s0 from './ErrorBoundaryFallback.module.css';\nimport SvgGithub from './SvgGithub';\nimport SvgYacd from './SvgYacd';\nconst yacdRepoIssueUrl = 'https://github.com/haishanh/yacd/issues';\n\nfunction ErrorBoundaryFallback({ message, detail }) {\n  return (\n    <div className={s0.root}>\n      <div className={s0.yacd}>\n        <SvgYacd width={150} height={150} />\n      </div>\n      {message ? <h1>{message}</h1> : null}\n      {detail ? <p>{detail}</p> : null}\n      <p>\n        <a className={s0.link} href={yacdRepoIssueUrl}>\n          <SvgGithub width={16} height={16} />\n          haishanh/yacd\n        </a>\n      </p>\n    </div>\n  );\n}\n\nErrorBoundaryFallback.propTypes = {\n  message: PropTypes.string,\n};\n\nexport default ErrorBoundaryFallback;\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\n\n// import { getSentry } from '../misc/sentry';\nimport { deriveMessageFromError } from '../misc/errors';\nimport ErrorBoundaryFallback from './ErrorBoundaryFallback';\n\nclass ErrorBoundary extends Component {\n  static propTypes = {\n    children: PropTypes.node,\n  };\n\n  state = { error: null };\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  render() {\n    if (this.state.error) {\n      const { message, detail } = deriveMessageFromError(this.state.error);\n      return <ErrorBoundaryFallback message={message} detail={detail} />;\n    } else {\n      return this.props.children;\n    }\n  }\n}\n\nexport default ErrorBoundary;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2kr0S-YLqE\"};","// extracted by mini-css-extract-plugin\nexport default {\"loading\":\"_12V5kDiPEH\",\"pulse\":\"_2FcudZSVil\",\"pulseScaleOut\":\"_3gvFm3l86P\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport s0 from './Loading.module.css';\n\nconst Loading = ({ height }) => {\n  const style = height ? { height } : {};\n  return (\n    <div className={s0.loading} style={style}>\n      <div className={s0.pulse} />\n    </div>\n  );\n};\n\nLoading.propTypes = {\n  height: PropTypes.string,\n};\n\nexport default Loading;\n","import React, { useMemo } from 'react';\n\nimport { fetchData } from '../api/traffic';\nimport useLineChart from '../hooks/useLineChart';\nimport {\n  chartJSResource,\n  chartStyles,\n  commonDataSetProps,\n} from '../misc/chart';\nimport { getClashAPIConfig, getSelectedChartStyleIndex } from '../store/app';\nimport { connect } from './StateProvider';\n\nconst chartWrapperStyle = {\n  // make chartjs chart responsive\n  position: 'relative',\n  maxWidth: 1000,\n};\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n  selectedChartStyleIndex: getSelectedChartStyleIndex(s),\n});\n\nexport default connect(mapState)(TrafficChart);\n\nfunction TrafficChart({ apiConfig, selectedChartStyleIndex }) {\n  const Chart = chartJSResource.read();\n  const traffic = fetchData(apiConfig);\n  const data = useMemo(\n    () => ({\n      labels: traffic.labels,\n      datasets: [\n        {\n          ...commonDataSetProps,\n          ...chartStyles[selectedChartStyleIndex].up,\n          label: 'Up',\n          data: traffic.up,\n        },\n        {\n          ...commonDataSetProps,\n          ...chartStyles[selectedChartStyleIndex].down,\n          label: 'Down',\n          data: traffic.down,\n        },\n      ],\n    }),\n    [traffic, selectedChartStyleIndex]\n  );\n\n  useLineChart(Chart, 'trafficChart', data, traffic);\n\n  return (\n    <div style={chartWrapperStyle}>\n      <canvas id=\"trafficChart\" />\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"TrafficNow\":\"_2n4kL7wLDR\"};","import React from 'react';\n\nimport * as connAPI from '../api/connections';\nimport { fetchData } from '../api/traffic';\nimport prettyBytes from '../misc/pretty-bytes';\nimport { getClashAPIConfig } from '../store/app';\nimport { connect } from './StateProvider';\nimport s0 from './TrafficNow.module.css';\n\nconst { useState, useEffect, useCallback } = React;\n\nconst mapState = (s) => ({\n  apiConfig: getClashAPIConfig(s),\n});\nexport default connect(mapState)(TrafficNow);\n\nfunction TrafficNow({ apiConfig }) {\n  const { upStr, downStr } = useSpeed(apiConfig);\n  const { upTotal, dlTotal, connNumber } = useConnection(apiConfig);\n  return (\n    <div className={s0.TrafficNow}>\n      <div className=\"sec\">\n        <div>Upload</div>\n        <div>{upStr}</div>\n      </div>\n      <div className=\"sec\">\n        <div>Download</div>\n        <div>{downStr}</div>\n      </div>\n      <div className=\"sec\">\n        <div>Upload Total</div>\n        <div>{upTotal}</div>\n      </div>\n      <div className=\"sec\">\n        <div>Download Total</div>\n        <div>{dlTotal}</div>\n      </div>\n      <div className=\"sec\">\n        <div>Active Connections</div>\n        <div>{connNumber}</div>\n      </div>\n    </div>\n  );\n}\n\nfunction useSpeed(apiConfig) {\n  const [speed, setSpeed] = useState({ upStr: '0 B/s', downStr: '0 B/s' });\n  useEffect(() => {\n    return fetchData(apiConfig).subscribe((o) =>\n      setSpeed({\n        upStr: prettyBytes(o.up) + '/s',\n        downStr: prettyBytes(o.down) + '/s',\n      })\n    );\n  }, [apiConfig]);\n  return speed;\n}\n\nfunction useConnection(apiConfig) {\n  const [state, setState] = useState({\n    upTotal: '0 B',\n    dlTotal: '0 B',\n    connNumber: 0,\n  });\n  const read = useCallback(\n    ({ downloadTotal, uploadTotal, connections }) => {\n      setState({\n        upTotal: prettyBytes(uploadTotal),\n        dlTotal: prettyBytes(downloadTotal),\n        connNumber: connections.length,\n      });\n    },\n    [setState]\n  );\n  useEffect(() => {\n    return connAPI.fetchData(apiConfig, read);\n  }, [apiConfig, read]);\n  return state;\n}\n","import React, { Suspense } from 'react';\n\nimport ContentHeader from './ContentHeader';\nimport s0 from './Home.module.css';\nimport Loading from './Loading';\nimport TrafficChart from './TrafficChart';\nimport TrafficNow from './TrafficNow';\n\nexport default function Home() {\n  return (\n    <div>\n      <ContentHeader title=\"Overview\" />\n      <div className={s0.root}>\n        <div>\n          <TrafficNow />\n        </div>\n        <div className={s0.chart}>\n          <Suspense fallback={<Loading height=\"200px\" />}>\n            <TrafficChart />\n          </Suspense>\n        </div>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"lo\":\"_2fg1R7Zu62\"};","import React from 'react';\n\nimport s0 from './Loading2.module.css';\nimport SvgYacd from './SvgYacd';\n\nfunction Loading() {\n  return (\n    <div className={s0.lo}>\n      <SvgYacd width={280} height={280} animate c0=\"transparent\" c1=\"#646464\" />\n    </div>\n  );\n}\n\nexport default Loading;\n","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"_1X99PPGcn7\",\"content\":\"_2oV8uPP0dj\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3sTuXodYya\",\"logoPlaceholder\":\"_1WdrygzFVZ\",\"rows\":\"q9nBJwAvlz\",\"row\":\"_3yqSXpep4D\",\"rowActive\":\"_3wqPc_btNi\",\"label\":\"_2sd59kze-t\",\"footer\":\"_2o6aUGu--S\",\"iconWrapper\":\"_11NITPe4W7\",\"themeSwitchContainer\":\"_1kzEILbWHq\"};","import cx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Info } from 'react-feather';\nimport {\n  FcAreaChart,\n  FcDocument,\n  FcGlobe,\n  FcLink,\n  FcRuler,\n  FcSettings,\n} from 'react-icons/fc';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { framerMotionResouce } from '../misc/motion';\nimport { getTheme, switchTheme } from '../store/app';\nimport s from './SideBar.module.css';\nimport { connect } from './StateProvider';\n\nconst { useCallback } = React;\n\n// testing color icons\n\n// const icons = {\n//   activity: Activity,\n//   globe: Globe,\n//   command: Command,\n//   file: File,\n//   settings: Settings,\n//   link: Link2\n// };\n\nconst icons = {\n  activity: FcAreaChart,\n  globe: FcGlobe,\n  command: FcRuler,\n  file: FcDocument,\n  settings: FcSettings,\n  link: FcLink,\n};\n\nconst SideBarRow = React.memo(function SideBarRow({\n  isActive,\n  to,\n  iconId,\n  labelText,\n}) {\n  const Comp = icons[iconId];\n  const className = cx(s.row, isActive ? s.rowActive : null);\n  return (\n    <Link to={to} className={className}>\n      <Comp />\n      <div className={s.label}>{labelText}</div>\n    </Link>\n  );\n});\n\nSideBarRow.propTypes = {\n  isActive: PropTypes.bool.isRequired,\n  to: PropTypes.string.isRequired,\n  iconId: PropTypes.string,\n  labelText: PropTypes.string,\n};\n\nconst pages = [\n  {\n    to: '/',\n    iconId: 'activity',\n    labelText: 'Overview',\n  },\n  {\n    to: '/proxies',\n    iconId: 'globe',\n    labelText: 'Proxies',\n  },\n  {\n    to: '/rules',\n    iconId: 'command',\n    labelText: 'Rules',\n  },\n  {\n    to: '/connections',\n    iconId: 'link',\n    labelText: 'Conns',\n  },\n  {\n    to: '/configs',\n    iconId: 'settings',\n    labelText: 'Config',\n  },\n  {\n    to: '/logs',\n    iconId: 'file',\n    labelText: 'Logs',\n  },\n];\n\nfunction SideBar({ dispatch, theme }) {\n  const location = useLocation();\n  const switchThemeHooked = useCallback(() => {\n    dispatch(switchTheme());\n  }, [dispatch]);\n  return (\n    <div className={s.root}>\n      <div className={s.logoPlaceholder} />\n      <div className={s.rows}>\n        {pages.map(({ to, iconId, labelText }) => (\n          <SideBarRow\n            key={to}\n            to={to}\n            isActive={location.pathname === to}\n            iconId={iconId}\n            labelText={labelText}\n          />\n        ))}\n      </div>\n      <div className={s.footer}>\n        <button\n          className={cx(s.iconWrapper, s.themeSwitchContainer)}\n          onClick={switchThemeHooked}\n        >\n          {theme === 'light' ? <MoonA /> : <Sun />}\n        </button>\n        <Link to=\"/about\" className={s.iconWrapper}>\n          <Info size={20} />\n        </Link>\n      </div>\n    </div>\n  );\n}\n\nfunction MoonA() {\n  const module = framerMotionResouce.read();\n  const motion = module.motion;\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <motion.path\n        d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"\n        initial={{ rotate: -30 }}\n        animate={{ rotate: 0 }}\n        transition={{ duration: 0.7 }}\n      />\n    </svg>\n  );\n}\n\nfunction Sun() {\n  const module = framerMotionResouce.read();\n  const motion = module.motion;\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"20\"\n      height=\"20\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n    >\n      <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\n      <motion.g\n        initial={{ scale: 0.8 }}\n        animate={{ scale: 1 }}\n        transition={{ duration: 0.7 }}\n      >\n        <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\n        <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\n        <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\n        <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\n        <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\n        <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\n        <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\n        <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\n      </motion.g>\n    </svg>\n  );\n}\n\nconst mapState = (s) => ({ theme: getTheme(s) });\nexport default connect(mapState)(SideBar);\n","import React, { PureComponent } from 'react';\nimport { Zap } from 'react-feather';\n\nimport Button from './Button';\nimport Input from './Input';\nimport { LoadingDot } from './shared/Basic';\nimport SwitchThemed from './SwitchThemed';\nimport ToggleSwitch from './ToggleSwitch';\n\nconst noop = () => {\n  /* empty */\n};\n\nconst paneStyle = {\n  padding: '20px 0',\n};\n\nconst optionsRule = [\n  {\n    label: 'Global',\n    value: 'Global',\n  },\n  {\n    label: 'Rule',\n    value: 'Rule',\n  },\n  {\n    label: 'Direct',\n    value: 'Direct',\n  },\n];\n\nconst Pane = ({ children, style }) => (\n  <div style={{ ...paneStyle, ...style }}>{children}</div>\n);\n\nfunction useToggle(initialState = false) {\n  const [onoff, setonoff] = React.useState(initialState);\n  const handleChange = React.useCallback(() => {\n    setonoff((x) => !x);\n  }, []);\n  return [onoff, handleChange];\n}\n\nfunction SwitchExample() {\n  const [checked, handleChange] = useToggle(false);\n  return <SwitchThemed checked={checked} onChange={handleChange} />;\n}\n\nclass StyleGuide extends PureComponent {\n  render() {\n    return (\n      <div>\n        <Pane>\n          <SwitchExample />\n        </Pane>\n        <Pane>\n          <Input />\n        </Pane>\n        <Pane>\n          <ToggleSwitch\n            name=\"test\"\n            options={optionsRule}\n            value=\"Rule\"\n            onChange={noop}\n          />\n        </Pane>\n        <Pane>\n          <Button text=\"Test Lxatency\" start={<Zap size={16} />} />\n          <Button text=\"Test Lxatency\" start={<Zap size={16} />} isLoading />\n          <Button label=\"Test Lxatency\" />\n          <Button label=\"Button Plain\" kind=\"minimal\" />\n        </Pane>\n        <Pane style={{ paddingLeft: 20 }}>\n          <LoadingDot />\n        </Pane>\n      </div>\n    );\n  }\n}\n\nexport default StyleGuide;\n","import './Root.css';\n\nimport React, { lazy, Suspense } from 'react';\nimport { HashRouter as Router, useRoutes } from 'react-router-dom';\nimport { RecoilRoot } from 'recoil';\nimport { About } from 'src/components/about/About';\n\nimport { actions, initialState } from '../store';\nimport APIConfig from './APIConfig';\nimport APIDiscovery from './APIDiscovery';\nimport ErrorBoundary from './ErrorBoundary';\nimport Home from './Home';\nimport Loading2 from './Loading2';\nimport s0 from './Root.module.css';\nimport SideBar from './SideBar';\nimport StateProvider from './StateProvider';\nimport StyleGuide from './StyleGuide';\n\nconst Connections = lazy(() =>\n  import(\n    /* webpackChunkName: \"conns\" */\n    /* webpackPrefetch: true */\n    './Connections'\n  )\n);\nconst Config = lazy(() =>\n  import(\n    /* webpackChunkName: \"config\" */\n    /* webpackPrefetch: true */\n    './Config'\n  )\n);\nconst Logs = lazy(() =>\n  import(\n    /* webpackChunkName: \"logs\" */\n    /* webpackPrefetch: true */\n    './Logs'\n  )\n);\nconst Proxies = lazy(() =>\n  import(\n    /* webpackChunkName: \"proxies\" */\n    /* webpackPrefetch: true */\n    './proxies/Proxies'\n  )\n);\nconst Rules = lazy(() =>\n  import(\n    /* webpackChunkName: \"rules\" */\n    /* webpackPrefetch: true */\n    './Rules'\n  )\n);\n\nconst routes = [\n  { path: '/', element: <Home /> },\n  { path: '/connections', element: <Connections /> },\n  { path: '/configs', element: <Config /> },\n  { path: '/logs', element: <Logs /> },\n  { path: '/proxies', element: <Proxies /> },\n  { path: '/rules', element: <Rules /> },\n  { path: '/about', element: <About /> },\n  __DEV__ ? { path: '/style', element: <StyleGuide /> } : false,\n].filter(Boolean);\n\nfunction RouteInnerApp() {\n  return useRoutes(routes);\n}\n\nfunction SideBarApp() {\n  return (\n    <>\n      <APIDiscovery />\n      <SideBar />\n      <div className={s0.content}>\n        <Suspense fallback={<Loading2 />}>\n          <RouteInnerApp />\n        </Suspense>\n      </div>\n    </>\n  );\n}\n\nfunction App() {\n  return useRoutes([\n    { path: '/backend', element: <APIConfig /> },\n    { path: '*', element: <SideBarApp /> },\n  ]);\n}\n\nconst Root = () => (\n  <ErrorBoundary>\n    <RecoilRoot>\n      <StateProvider initialState={initialState} actions={actions}>\n        <Router>\n          <div className={s0.app}>\n            <Suspense fallback={<Loading2 />}>\n              <App />\n            </Suspense>\n          </div>\n        </Router>\n      </StateProvider>\n    </RecoilRoot>\n  </ErrorBoundary>\n);\n\nexport default Root;\n","import 'modern-normalize/modern-normalize.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Modal from 'react-modal';\n\nimport Root from './components/Root';\n\nconst rootEl = document.getElementById('app');\n\nModal.setAppElement(rootEl);\n\nconst root = ReactDOM.unstable_createRoot(rootEl);\nroot.render(<Root />);\n\n// eslint-disable-next-line no-console\nconsole.log('Checkout the repo: https://github.com/haishanh/yacd');\n// eslint-disable-next-line\nconsole.log('Version:', __VERSION__);\n","// extracted by mini-css-extract-plugin\nexport default {\"btn\":\"_796AqwOFs_\",\"minimal\":\"_1bLZvI40oA\",\"btnStart\":\"_1SrCTG7yDt\",\"loadingContainer\":\"_39VuJRXAmL\"};","import cx from 'clsx';\nimport * as React from 'react';\n\nimport s0 from './Button.module.css';\nimport { LoadingDot } from './shared/Basic';\n\nconst { memo, forwardRef, useCallback } = React;\n\ntype ButtonInternalProps = {\n  children?: React.ReactNode;\n  label?: string;\n  text?: string;\n  start?: React.ReactElement | (() => React.ReactElement);\n};\n\ntype ButtonProps = {\n  isLoading?: boolean;\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>) => unknown;\n  disabled?: boolean;\n  kind?: 'primary' | 'minimal';\n  className?: string;\n} & ButtonInternalProps;\n\nfunction Button(props: ButtonProps, ref: React.Ref<HTMLButtonElement>) {\n  const {\n    onClick,\n    disabled = false,\n    isLoading,\n    kind = 'primary',\n    className,\n    ...restProps\n  } = props;\n  const internalOnClick = useCallback(\n    (e) => {\n      if (isLoading) return;\n      onClick && onClick(e);\n    },\n    [isLoading, onClick]\n  );\n  const btnClassName = cx(\n    s0.btn,\n    {\n      [s0.minimal]: kind === 'minimal',\n    },\n    className\n  );\n  return (\n    <button\n      className={btnClassName}\n      ref={ref}\n      onClick={internalOnClick}\n      disabled={disabled}\n    >\n      {isLoading ? (\n        <>\n          <span\n            style={{\n              display: 'inline-flex',\n              opacity: 0,\n            }}\n          >\n            <ButtonInternal {...restProps} />\n          </span>\n          <span className={s0.loadingContainer}>\n            <LoadingDot />\n          </span>\n        </>\n      ) : (\n        <ButtonInternal {...restProps} />\n      )}\n    </button>\n  );\n}\n\nfunction ButtonInternal({ children, label, text, start }: ButtonInternalProps) {\n  return (\n    <>\n      {start ? (\n        <span className={s0.btnStart}>\n          {typeof start === 'function' ? start() : start}\n        </span>\n      ) : null}\n      {children || label || text}\n    </>\n  );\n}\n\nexport default memo(forwardRef(Button));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_24ddJm1Q5s\",\"h1\":\"B4QNkMu-0t\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport s0 from './ContentHeader.module.css';\n\nfunction ContentHeader({ title }) {\n  return (\n    <div className={s0.root}>\n      <h1 className={s0.h1}>{title}</h1>\n    </div>\n  );\n}\n\nContentHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n\nexport default React.memo(ContentHeader);\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"_2DECxrOsTa\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport s0 from './Input.module.css';\n\nconst { useState, useRef, useEffect, useCallback } = React;\n\nexport default function Input(props) {\n  return <input className={s0.input} {...props} />;\n}\n\nexport function SelfControlledInput({ value, ...restProps }) {\n  const [internalValue, setInternalValue] = useState(value);\n  const refValue = useRef(value);\n  useEffect(() => {\n    if (refValue.current !== value) {\n      // ideally we should only do this when this input is not focused\n      setInternalValue(value);\n    }\n    refValue.current = value;\n  }, [value]);\n  const onChange = useCallback((e) => setInternalValue(e.target.value), [\n    setInternalValue,\n  ]);\n\n  return (\n    <input\n      className={s0.input}\n      value={internalValue}\n      onChange={onChange}\n      {...restProps}\n    />\n  );\n}\n\nInput.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  type: PropTypes.string,\n  onChange: PropTypes.func,\n  name: PropTypes.string,\n  placeholder: PropTypes.string,\n};\n","import produce, * as immer from 'immer';\nimport React from 'react';\n\n// in logs store we update logs in place\n// outside of immer produce\n// this is just workaround\nimmer.setAutoFreeze(false);\n\nconst {\n  createContext,\n  memo,\n  useMemo,\n  useRef,\n  useEffect,\n  useCallback,\n  useContext,\n  useState,\n} = React;\n\nexport { immer };\n\nconst StateContext = createContext(null);\nconst DispatchContext = createContext(null);\nconst ActionsContext = createContext(null);\n\nexport function useStoreState() {\n  return useContext(StateContext);\n}\n\nexport function useStoreDispatch() {\n  return useContext(DispatchContext);\n}\n\nexport function useStoreActions() {\n  return useContext(ActionsContext);\n}\n\n// boundActionCreators\nexport default function Provider({ initialState, actions = {}, children }) {\n  const stateRef = useRef(initialState);\n  const [state, setState] = useState(initialState);\n  const getState = useCallback(() => stateRef.current, []);\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      window.getState2 = getState;\n    }\n  }, [getState]);\n  const dispatch = useCallback(\n    (actionId, fn) => {\n      if (typeof actionId === 'function') return actionId(dispatch, getState);\n\n      const stateNext = produce(getState(), fn);\n      if (stateNext !== stateRef.current) {\n        if (process.env.NODE_ENV === 'development') {\n          // eslint-disable-next-line no-console\n          console.log(actionId, stateNext);\n        }\n        stateRef.current = stateNext;\n        setState(stateNext);\n      }\n    },\n    [getState]\n  );\n  const boundActions = useMemo(() => bindActions(actions, dispatch), [\n    actions,\n    dispatch,\n  ]);\n\n  return (\n    <StateContext.Provider value={state}>\n      <DispatchContext.Provider value={dispatch}>\n        <ActionsContext.Provider value={boundActions}>\n          {children}\n        </ActionsContext.Provider>\n      </DispatchContext.Provider>\n    </StateContext.Provider>\n  );\n}\n\nexport function connect(mapStateToProps) {\n  return (Component) => {\n    const MemoComponent = memo(Component);\n    function Connected(props) {\n      const state = useContext(StateContext);\n      const dispatch = useContext(DispatchContext);\n      const mapped = mapStateToProps(state, props);\n      const nextProps = { dispatch, ...props, ...mapped };\n      return <MemoComponent {...nextProps} />;\n    }\n    return Connected;\n  };\n}\n\n// steal from https://github.com/reduxjs/redux/blob/master/src/bindActionCreators.ts\nfunction bindAction(action, dispatch) {\n  return function (...args) {\n    return dispatch(action.apply(this, args));\n  };\n}\n\nfunction bindActions(actions, dispatch) {\n  const boundActions = {};\n  for (const key in actions) {\n    const action = actions[key];\n    if (typeof action === 'function') {\n      boundActions[key] = bindAction(action, dispatch);\n    } else if (typeof action === 'object') {\n      boundActions[key] = bindActions(action, dispatch);\n    }\n  }\n  return boundActions;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"path\":\"_3MvgliBN_D\",\"dash\":\"_2C1TpO8LMn\"};","import cx from 'clsx';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport s from './SvgYacd.module.css';\n\nfunction SvgYacd({\n  width = 320,\n  height = 320,\n  animate = false,\n  c0 = 'currentColor',\n  c1 = '#eee',\n}) {\n  const faceClasName = cx({ [s.path]: animate });\n  return (\n    <svg\n      width={width}\n      height={height}\n      viewBox=\"0 0 320 320\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g fill=\"none\" fillRule=\"evenodd\">\n        {/* face */}\n        <path\n          d=\"M71.689 53.055c9.23-1.487 25.684 27.263 41.411 56.663 18.572-8.017 71.708-7.717 93.775 0 4.714-15.612 31.96-57.405 41.626-56.663 3.992.088 13.07 31.705 23.309 94.96 2.743 16.949 7.537 47.492 14.38 91.63-42.339 17.834-84.37 26.751-126.095 26.751-41.724 0-83.756-8.917-126.095-26.751C52.973 116.244 65.536 54.047 71.689 53.055z\"\n          stroke={c1}\n          strokeWidth=\"4\"\n          strokeLinecap=\"round\"\n          fill={c0}\n          className={faceClasName}\n        />\n        <circle fill={c1} cx=\"216.5\" cy=\"181.5\" r=\"14.5\" />\n        <circle fill={c1} cx=\"104.5\" cy=\"181.5\" r=\"14.5\" />\n        {/* mouth */}\n        <g stroke={c1} strokeLinecap=\"round\" strokeWidth=\"4\">\n          <path d=\"M175.568 218.694c-2.494 1.582-5.534 2.207-8.563 1.508-3.029-.7-5.487-2.594-7.035-5.11M143.981 218.694c2.494 1.582 5.534 2.207 8.563 1.508 3.03-.7 5.488-2.594 7.036-5.11\" />\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nSvgYacd.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n};\n\nexport default SvgYacd;\n","import React from 'react';\nimport Switch from 'react-switch';\n\nimport { getTheme } from '../store/app';\nimport { connect } from './StateProvider';\n\nfunction SwitchThemed({ checked = false, onChange, theme, name }) {\n  const offColor = theme === 'dark' ? '#393939' : '#e9e9e9';\n\n  return (\n    <Switch\n      onChange={onChange}\n      checked={checked}\n      uncheckedIcon={false}\n      checkedIcon={false}\n      offColor={offColor}\n      onColor=\"#047aff\"\n      offHandleColor=\"#fff\"\n      onHandleColor=\"#fff\"\n      handleDiameter={24}\n      height={28}\n      width={44}\n      className=\"rs\"\n      name={name}\n    />\n  );\n}\n\nexport default connect((s) => ({\n  theme: getTheme(s),\n}))(SwitchThemed);\n","// extracted by mini-css-extract-plugin\nexport default {\"ToggleSwitch\":\"_2IgDTE__bQ\",\"slider\":\"_2IfOm9qQ_4\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\n\nimport s0 from './ToggleSwitch.module.css';\n\nfunction ToggleSwitch({ options, value, name, onChange }) {\n  const idxSelected = useMemo(\n    () => options.map((o) => o.value).indexOf(value),\n    [options, value]\n  );\n\n  const getPortionPercentage = useCallback(\n    (idx) => {\n      const w = Math.floor(100 / options.length);\n      if (idx === options.length - 1) {\n        return 100 - options.length * w + w;\n      } else if (idx > -1) {\n        return w;\n      }\n    },\n    [options]\n  );\n\n  const sliderStyle = useMemo(() => {\n    return {\n      width: getPortionPercentage(idxSelected) + '%',\n      left: idxSelected * getPortionPercentage(0) + '%',\n    };\n  }, [idxSelected, getPortionPercentage]);\n\n  return (\n    <div className={s0.ToggleSwitch}>\n      <div className={s0.slider} style={sliderStyle} />\n      {options.map((o, idx) => {\n        const id = `${name}-${o.label}`;\n        const className = idx === 0 ? '' : 'border-left';\n        return (\n          <label\n            htmlFor={id}\n            key={id}\n            className={className}\n            style={{\n              width: getPortionPercentage(idx) + '%',\n            }}\n          >\n            <input\n              id={id}\n              name={name}\n              type=\"radio\"\n              value={o.value}\n              checked={value === o.value}\n              onChange={onChange}\n            />\n            <div>{o.label}</div>\n          </label>\n        );\n      })}\n    </div>\n  );\n}\n\nToggleSwitch.propTypes = {\n  options: PropTypes.array,\n  value: PropTypes.string,\n  name: PropTypes.string,\n  onChange: PropTypes.func,\n};\n\nexport default React.memo(ToggleSwitch);\n","// extracted by mini-css-extract-plugin\nexport default {\"sectionNameType\":\"Q-CsP5Y3FT\",\"loadingDot\":\"_3GL3LmFL_E\",\"dot2\":\"uZWMZR9nBW\",\"dot1\":\"saNygeIhRC\",\"dot3\":\"_3RtxWfV4g4\"};","import React from 'react';\n\nimport s from './Basic.module.css';\n\nexport function SectionNameType({ name, type }) {\n  return (\n    <h2 className={s.sectionNameType}>\n      <span>{name}</span>\n      <span>{type}</span>\n    </h2>\n  );\n}\n\nexport function LoadingDot() {\n  return <span className={s.loadingDot} />;\n}\n","import React from 'react';\n\nimport { commonChartOptions } from '../misc/chart';\n\nconst { useEffect } = React;\nconst options = commonChartOptions;\n\nexport default function useLineChart(\n  Chart,\n  elementId,\n  data,\n  subscription,\n  extraChartOptions = {}\n) {\n  useEffect(() => {\n    const ctx = document.getElementById(elementId).getContext('2d');\n    const c = new Chart(ctx, {\n      type: 'line',\n      data,\n      options: { ...options, ...extraChartOptions },\n    });\n    const unsubscribe =\n      subscription && subscription.subscribe(() => c.update());\n    return () => {\n      unsubscribe && unsubscribe();\n      c.destroy();\n    };\n  }, [Chart, elementId, data, subscription, extraChartOptions]);\n}\n","import { unstable_createResource as createResource } from '@hsjs/react-cache';\n\nimport prettyBytes from './pretty-bytes';\n\nexport const chartJSResource = createResource(() => {\n  return import(\n    /* webpackChunkName: \"chartjs\" */\n    /* webpackPrefetch: true */\n    /* webpackPreload: true */\n    'chart.js/dist/Chart.min.js'\n  ).then((c) => c.default);\n});\n\nexport const commonDataSetProps = {\n  borderWidth: 1,\n  lineTension: 0,\n  pointRadius: 0,\n};\n\nexport const commonChartOptions = {\n  responsive: true,\n  maintainAspectRatio: true,\n  title: {\n    display: false,\n  },\n  legend: {\n    display: true,\n    position: 'top',\n    labels: {\n      fontColor: '#ccc',\n      boxWidth: 20,\n    },\n  },\n  tooltips: {\n    enabled: false,\n    mode: 'index',\n    intersect: false,\n    animationDuration: 100,\n  },\n  hover: {\n    mode: 'nearest',\n    intersect: true,\n  },\n  scales: {\n    xAxes: [\n      {\n        display: false,\n        gridLines: {\n          display: false,\n        },\n      },\n    ],\n    yAxes: [\n      {\n        display: true,\n        gridLines: {\n          display: true,\n          color: '#555',\n          borderDash: [3, 6],\n          drawBorder: false,\n        },\n        ticks: {\n          callback(value) {\n            return prettyBytes(value) + '/s ';\n          },\n        },\n      },\n    ],\n  },\n};\n\nexport const chartStyles = [\n  {\n    down: {\n      backgroundColor: 'rgba(176, 209, 132, 0.8)',\n      borderColor: 'rgb(176, 209, 132)',\n    },\n    up: {\n      backgroundColor: 'rgba(181, 220, 231, 0.8)',\n      borderColor: 'rgb(181, 220, 231)',\n    },\n  },\n  {\n    up: {\n      backgroundColor: 'rgb(98, 190, 100)',\n      borderColor: 'rgb(78,146,79)',\n    },\n    down: {\n      backgroundColor: 'rgb(160, 230, 66)',\n      borderColor: 'rgb(110, 156, 44)',\n    },\n  },\n  {\n    up: {\n      backgroundColor: 'rgba(94, 175, 223, 0.3)',\n      borderColor: 'rgb(94, 175, 223)',\n    },\n    down: {\n      backgroundColor: 'rgba(139, 227, 195, 0.3)',\n      borderColor: 'rgb(139, 227, 195)',\n    },\n  },\n  {\n    up: {\n      backgroundColor: 'rgba(242, 174, 62, 0.3)',\n      borderColor: 'rgb(242, 174, 62)',\n    },\n    down: {\n      backgroundColor: 'rgba(69, 154, 248, 0.3)',\n      borderColor: 'rgb(69, 154, 248)',\n    },\n  },\n];\n\n// TODO to remove\nexport const colorCombo = chartStyles;\n","import { createResource } from './createResource';\n\nexport const framerMotionResouce = createResource(\n  () => import('framer-motion')\n);\n","// from https://gist.github.com/ryanflorence/e10cc9dbc0e259759ec942ba82e5b57c\nexport function createResource(getPromise: (key: string) => Promise<any>) {\n  let cache = {};\n  const inflight = {};\n  const errors = {};\n\n  function load(key = 'default') {\n    inflight[key] = getPromise(key)\n      .then((val) => {\n        delete inflight[key];\n        cache[key] = val;\n      })\n      .catch((error) => {\n        errors[key] = error;\n      });\n    return inflight[key];\n  }\n\n  function preload(key = 'default') {\n    if (cache[key] !== undefined || inflight[key]) return;\n    load(key);\n  }\n\n  function read(key = 'default') {\n    if (cache[key] !== undefined) {\n      return cache[key];\n    } else if (errors[key]) {\n      throw errors[key];\n    } else if (inflight[key]) {\n      throw inflight[key];\n    } else {\n      throw load(key);\n    }\n  }\n\n  function clear(key: 'default') {\n    if (key) {\n      delete cache[key];\n    } else {\n      cache = {};\n    }\n  }\n\n  return { preload, read, clear };\n}\n","// steal from https://github.com/sindresorhus/pretty-bytes/blob/master/index.js\n\nconst UNITS = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\nexport default number => {\n  if (number < 1000) {\n    return number + ' B';\n  }\n  const exponent = Math.min(\n    Math.floor(Math.log10(number) / 3),\n    UNITS.length - 1\n  );\n  number = Number((number / Math.pow(1000, exponent)).toPrecision(3));\n  const unit = UNITS[exponent];\n  return number + ' ' + unit;\n};\n","import { trimTrailingSlash } from 'src/misc/utils';\nimport { ClashAPIConfig } from 'src/types';\n\nconst headersCommon = { 'Content-Type': 'application/json' };\n\nfunction genCommonHeaders({ secret }: { secret?: string }) {\n  const h = { ...headersCommon };\n  if (secret) {\n    h['Authorization'] = `Bearer ${secret}`;\n  }\n  return h;\n}\n\nexport function getURLAndInit({ baseURL, secret }: ClashAPIConfig) {\n  const headers = genCommonHeaders({ secret });\n  return {\n    url: baseURL,\n    init: { headers },\n  };\n}\n\nexport function buildWebSocketURL(apiConfig: ClashAPIConfig, endpoint: string) {\n  const { baseURL, secret } = apiConfig;\n  let qs = '';\n  if (typeof secret === 'string' && secret !== '') {\n    qs += '?token=' + encodeURIComponent(secret);\n  }\n  const url = new URL(baseURL);\n  url.protocol === 'https:' ? (url.protocol = 'wss:') : (url.protocol = 'ws:');\n  return `${trimTrailingSlash(url.href)}${endpoint}${qs}`;\n}\n","export function throttle<T extends any[]>(\n  fn: (...args: T) => unknown,\n  timeout: number\n) {\n  let pending = false;\n\n  return (...args: T) => {\n    if (!pending) {\n      pending = true;\n      fn(...args);\n      setTimeout(() => {\n        pending = false;\n      }, timeout);\n    }\n  };\n}\n\nexport function debounce<T extends any[]>(\n  fn: (...args: T) => unknown,\n  timeout: number\n) {\n  let timeoutId: number;\n  return (...args: T) => {\n    if (timeoutId) clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      fn(...args);\n    }, timeout);\n  };\n}\n\nexport function trimTrailingSlash(s: string) {\n  return s.replace(/\\/$/, '');\n}\n","// manage localStorage\n\nconst StorageKey = 'yacd.haishan.me';\n\nfunction loadState() {\n  try {\n    const serialized = localStorage.getItem(StorageKey);\n    if (!serialized) return undefined;\n    return JSON.parse(serialized);\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction saveState(state) {\n  try {\n    const serialized = JSON.stringify(state);\n    localStorage.setItem(StorageKey, serialized);\n  } catch (err) {\n    // ignore\n  }\n}\n\nfunction clearState() {\n  try {\n    localStorage.removeItem(StorageKey);\n  } catch (err) {\n    // ignore\n  }\n}\n\nexport { loadState, saveState, clearState };\n","import { loadState, saveState } from '../misc/storage';\nimport { debounce, trimTrailingSlash } from '../misc/utils';\nimport { fetchConfigs } from './configs';\nimport { closeModal } from './modals';\n\nexport const getClashAPIConfig = (s) => {\n  const idx = s.app.selectedClashAPIConfigIndex;\n  return s.app.clashAPIConfigs[idx];\n};\nexport const getSelectedClashAPIConfigIndex = (s) =>\n  s.app.selectedClashAPIConfigIndex;\nexport const getClashAPIConfigs = (s) => s.app.clashAPIConfigs;\nexport const getTheme = (s) => s.app.theme;\nexport const getSelectedChartStyleIndex = (s) => s.app.selectedChartStyleIndex;\nexport const getLatencyTestUrl = (s) => s.app.latencyTestUrl;\nexport const getCollapsibleIsOpen = (s) => s.app.collapsibleIsOpen;\nexport const getProxySortBy = (s) => s.app.proxySortBy;\nexport const getHideUnavailableProxies = (s) => s.app.hideUnavailableProxies;\nexport const getAutoCloseOldConns = (s) => s.app.autoCloseOldConns;\n\nconst saveStateDebounced = debounce(saveState, 600);\n\nfunction findClashAPIConfigIndex(getState, { baseURL, secret }) {\n  const arr = getClashAPIConfigs(getState());\n  for (let i = 0; i < arr.length; i++) {\n    const x = arr[i];\n    if (x.baseURL === baseURL && x.secret === secret) return i;\n  }\n}\n\nexport function addClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch, getState) => {\n    const idx = findClashAPIConfigIndex(getState, { baseURL, secret });\n    // already exists\n    if (idx) return;\n\n    const clashAPIConfig = { baseURL, secret, addedAt: Date.now() };\n    dispatch('addClashAPIConfig', (s) => {\n      s.app.clashAPIConfigs.push(clashAPIConfig);\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function removeClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch, getState) => {\n    const idx = findClashAPIConfigIndex(getState, { baseURL, secret });\n    dispatch('removeClashAPIConfig', (s) => {\n      s.app.clashAPIConfigs = [\n        ...s.app.clashAPIConfigs.slice(0, idx),\n        ...s.app.clashAPIConfigs.slice(idx + 1),\n      ];\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function selectClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch, getState) => {\n    const idx = findClashAPIConfigIndex(getState, { baseURL, secret });\n    const curr = getSelectedClashAPIConfigIndex(getState());\n    if (curr !== idx) {\n      dispatch('selectClashAPIConfig', (s) => {\n        s.app.selectedClashAPIConfigIndex = idx;\n      });\n    }\n    // side effect\n    saveState(getState().app);\n\n    // manual clean up is too complex\n    // we just reload the app\n    try {\n      window.location.reload();\n    } catch (err) {\n      // ignore\n    }\n  };\n}\n\n// unused\nexport function updateClashAPIConfig({ baseURL, secret }) {\n  return async (dispatch, getState) => {\n    const clashAPIConfig = { baseURL, secret };\n    dispatch('appUpdateClashAPIConfig', (s) => {\n      s.app.clashAPIConfigs[0] = clashAPIConfig;\n    });\n    // side effect\n    saveState(getState().app);\n    dispatch(closeModal('apiConfig'));\n    dispatch(fetchConfigs(clashAPIConfig));\n  };\n}\n\nconst bodyElement = document.body;\nfunction setTheme(theme = 'dark') {\n  if (theme === 'dark') {\n    bodyElement.classList.remove('light');\n    bodyElement.classList.add('dark');\n  } else {\n    bodyElement.classList.remove('dark');\n    bodyElement.classList.add('light');\n  }\n}\n\nexport function switchTheme() {\n  return (dispatch, getState) => {\n    const currentTheme = getTheme(getState());\n    const theme = currentTheme === 'light' ? 'dark' : 'light';\n    // side effect\n    setTheme(theme);\n    dispatch('storeSwitchTheme', (s) => {\n      s.app.theme = theme;\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function selectChartStyleIndex(selectedChartStyleIndex) {\n  return (dispatch, getState) => {\n    dispatch('appSelectChartStyleIndex', (s) => {\n      s.app.selectedChartStyleIndex = selectedChartStyleIndex;\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function updateAppConfig(name, value) {\n  return (dispatch, getState) => {\n    dispatch('appUpdateAppConfig', (s) => {\n      s.app[name] = value;\n    });\n    // side effect\n    saveState(getState().app);\n  };\n}\n\nexport function updateCollapsibleIsOpen(prefix, name, v) {\n  return (dispatch, getState) => {\n    dispatch('updateCollapsibleIsOpen', (s) => {\n      s.app.collapsibleIsOpen[`${prefix}:${name}`] = v;\n    });\n    // side effect\n    saveStateDebounced(getState().app);\n  };\n}\n\nconst defaultClashAPIConfig = {\n  baseURL: 'http://127.0.0.1:7892',\n  secret: '',\n  addedAt: 0,\n};\n// type Theme = 'light' | 'dark';\nconst defaultState = {\n  selectedClashAPIConfigIndex: 0,\n  clashAPIConfigs: [defaultClashAPIConfig],\n\n  latencyTestUrl: 'http://www.gstatic.com/generate_204',\n  selectedChartStyleIndex: 0,\n  theme: 'dark',\n\n  // type { [string]: boolean }\n  collapsibleIsOpen: {},\n  // how proxies are sorted in a group or provider\n  proxySortBy: 'Natural',\n  hideUnavailableProxies: false,\n  autoCloseOldConns: false,\n};\n\nfunction parseConfigQueryString() {\n  const { search } = window.location;\n  const collector = {};\n  if (typeof search !== 'string' || search === '') return collector;\n  const qs = search.replace(/^\\?/, '').split('&');\n  for (let i = 0; i < qs.length; i++) {\n    const [k, v] = qs[i].split('=');\n    collector[k] = encodeURIComponent(v);\n  }\n  return collector;\n}\n\nexport function initialState() {\n  let s = loadState();\n  s = { ...defaultState, ...s };\n  const query = parseConfigQueryString();\n\n  const conf = s.clashAPIConfigs[s.selectedClashAPIConfigIndex];\n  if (conf) {\n    const url = new URL(conf.baseURL);\n    if (query.hostname) {\n      url.hostname = query.hostname;\n    }\n    if (query.port) {\n      url.port = query.port;\n    }\n    // url.href is a stringifier and it appends a trailing slash\n    // that is not we want\n    conf.baseURL = trimTrailingSlash(url.href);\n    if (query.secret) {\n      conf.secret = query.secret;\n    }\n  }\n\n  if (query.theme === 'dark' || query.theme === 'light') {\n    s.theme = query.theme;\n  }\n  // set initial theme\n  setTheme(s.theme);\n  return s;\n}\n","import * as configsAPI from '../api/configs';\nimport * as trafficAPI from '../api/traffic';\nimport { openModal } from './modals';\n\nexport const getConfigs = (s) => s.configs.configs;\nexport const getLogLevel = (s) => s.configs.configs['log-level'];\n\nexport function fetchConfigs(apiConfig) {\n  return async (dispatch, getState) => {\n    let res;\n    try {\n      res = await configsAPI.fetchConfigs(apiConfig);\n    } catch (err) {\n      // TypeError and AbortError\n      dispatch(openModal('apiConfig'));\n      return;\n    }\n\n    if (!res.ok) {\n      console.log('Error fetch configs', res.statusText);\n      dispatch(openModal('apiConfig'));\n      return;\n    }\n\n    const payload = await res.json();\n\n    dispatch('store/configs#fetchConfigs', (s) => {\n      s.configs.configs = payload;\n    });\n\n    const configsCurr = getConfigs(getState());\n\n    if (configsCurr.haveFetchedConfig) {\n      // normally user will land on the \"traffic chart\" page first\n      // calling this here will let the data start streaming\n      // the traffic chart should already subscribed to the streaming\n      trafficAPI.fetchData(apiConfig);\n    } else {\n      dispatch(markHaveFetchedConfig());\n    }\n  };\n}\n\nfunction markHaveFetchedConfig() {\n  return (dispatch) => {\n    dispatch('store/configs#markHaveFetchedConfig', (s) => {\n      s.configs.haveFetchedConfig = true;\n    });\n  };\n}\n\nexport function updateConfigs(apiConfig, partialConfg) {\n  return async (dispatch) => {\n    configsAPI\n      .updateConfigs(apiConfig, partialConfg)\n      .then(\n        (res) => {\n          if (res.ok === false) {\n            // eslint-disable-next-line no-console\n            console.log('Error update configs', res.statusText);\n          }\n        },\n        (err) => {\n          // eslint-disable-next-line no-console\n          console.log('Error update configs', err);\n          throw err;\n        }\n      )\n      .then(() => {\n        dispatch(fetchConfigs(apiConfig));\n      });\n\n    dispatch('storeConfigsOptimisticUpdateConfigs', (s) => {\n      s.configs.configs = { ...s.configs.configs, ...partialConfg };\n    });\n  };\n}\n\nexport const initialState = {\n  configs: {\n    port: 7890,\n    'socks-port': 7891,\n    'redir-port': 0,\n    'allow-lan': false,\n    mode: 'Rule',\n    'log-level': 'info',\n  },\n  haveFetchedConfig: false,\n};\n","import { createSelector } from 'reselect';\n\nconst LogSize = 300;\n\nconst getLogs = (s) => s.logs.logs;\nconst getTail = (s) => s.logs.tail;\nexport const getSearchText = (s) => s.logs.searchText;\nexport const getLogsForDisplay = createSelector(\n  getLogs,\n  getTail,\n  getSearchText,\n  (logs, tail, searchText) => {\n    const x = [];\n    for (let i = tail; i >= 0; i--) {\n      x.push(logs[i]);\n    }\n    if (logs.length === LogSize) {\n      for (let i = LogSize - 1; i > tail; i--) {\n        x.push(logs[i]);\n      }\n    }\n\n    if (searchText === '') return x;\n    return x.filter((r) => r.payload.toLowerCase().indexOf(searchText) >= 0);\n  }\n);\n\nexport function updateSearchText(text) {\n  return (dispatch) => {\n    dispatch('logsUpdateSearchText', (s) => {\n      s.logs.searchText = text.toLowerCase();\n    });\n  };\n}\n\nexport function appendLog(log) {\n  return (dispatch, getState) => {\n    const s = getState();\n    const logs = getLogs(s);\n    const tailCurr = getTail(s);\n    const tail = tailCurr >= LogSize - 1 ? 0 : tailCurr + 1;\n    // mutate intentionally for performance\n    logs[tail] = log;\n\n    dispatch('logsAppendLog', (s) => {\n      s.logs.tail = tail;\n    });\n  };\n}\n\nexport const initialState = {\n  searchText: '',\n  logs: [],\n  // tail's initial value must be -1\n  tail: -1,\n};\n","export function openModal(modalName) {\n  return dispatch => {\n    dispatch(`openModal:${modalName}`, s => {\n      s.modals[modalName] = true;\n    });\n  };\n}\n\nexport function closeModal(modalName) {\n  return dispatch => {\n    dispatch(`closeModal:${modalName}`, s => {\n      s.modals[modalName] = false;\n    });\n  };\n}\n\nexport const initialState = { apiConfig: false };\n","import { getURLAndInit } from '../misc/request-helper';\nconst endpoint = '/proxies';\n\n/*\n$ curl \"http://127.0.0.1:8080/proxies/Proxy\" -XPUT -d '{ \"name\": \"ss3\" }' -i\nHTTP/1.1 400 Bad Request\nContent-Type: text/plain; charset=utf-8\n\n{\"error\":\"Selector update error: Proxy does not exist\"}\n\n~\n$ curl \"http://127.0.0.1:8080/proxies/GLOBAL\" -XPUT -d '{ \"name\": \"Proxy\" }' -i\nHTTP/1.1 204 No Content\n*/\n\nexport async function fetchProxies(config) {\n  const { url, init } = getURLAndInit(config);\n  const res = await fetch(url + endpoint, init);\n  return await res.json();\n}\n\nexport async function requestToSwitchProxy(apiConfig, name1, name2) {\n  const body = { name: name2 };\n  const { url, init } = getURLAndInit(apiConfig);\n  const fullURL = `${url}${endpoint}/${name1}`;\n  return await fetch(fullURL, {\n    ...init,\n    method: 'PUT',\n    body: JSON.stringify(body)\n  });\n}\n\nexport async function requestDelayForProxy(\n  apiConfig,\n  name,\n  latencyTestUrl = 'http://www.gstatic.com/generate_204'\n) {\n  const { url, init } = getURLAndInit(apiConfig);\n  const qs = `timeout=5000&url=${latencyTestUrl}`;\n  const fullURL = `${url}${endpoint}/${name}/delay?${qs}`;\n  return await fetch(fullURL, init);\n}\n\nexport async function fetchProviderProxies(config) {\n  const { url, init } = getURLAndInit(config);\n  const res = await fetch(url + '/providers/proxies', init);\n  if (res.status === 404) {\n    return { providers: {} };\n  }\n  return await res.json();\n}\n\nexport async function updateProviderByName(config, name) {\n  const { url, init } = getURLAndInit(config);\n  const options = { ...init, method: 'PUT' };\n  return await fetch(url + '/providers/proxies/' + name, options);\n}\n\nexport async function healthcheckProviderByName(config, name) {\n  const { url, init } = getURLAndInit(config);\n  const options = { ...init, method: 'GET' };\n  return await fetch(\n    url + '/providers/proxies/' + name + '/healthcheck',\n    options\n  );\n}\n","import { atom } from 'recoil';\nimport { ClashAPIConfig } from 'src/types';\n\nimport * as connAPI from '../api/connections';\nimport * as proxiesAPI from '../api/proxies';\nimport { getAutoCloseOldConns, getLatencyTestUrl } from './app';\n\ntype PrimitiveProxyType = 'Shadowsocks' | 'Snell' | 'Socks5' | 'Http' | 'Vmess';\n\ntype LatencyHistory = Array<{ time: string; delay: number }>;\n\nexport type ProxyItem = {\n  name: string;\n  type: PrimitiveProxyType;\n  history: LatencyHistory;\n  all?: string[];\n  now?: string;\n};\n\ntype ProxyProvider = {\n  name: string;\n  type: 'Proxy';\n  updatedAt: string;\n  vehicleType: 'HTTP' | 'File' | 'Compatible';\n  proxies: Array<ProxyItem>;\n};\n\ntype FormattedProxyProvider = Omit<ProxyProvider, 'proxies'> & {\n  proxies: string[];\n};\n\nexport type ProxiesMapping = Record<string, ProxyItem>;\nexport type DelayMapping = Record<string, { number?: number }>;\n\ntype SwitchProxyCtxItem = { groupName: string; itemName: string };\ntype SwitchProxyCtx = {\n  to: SwitchProxyCtxItem;\n};\n\ntype ProxiesState = {\n  proxies: ProxiesMapping;\n  delay: DelayMapping;\n  groupNames: string[];\n  proxyProviders?: FormattedProxyProvider[];\n  dangleProxyNames?: string[];\n\n  showModalClosePrevConns: boolean;\n  switchProxyCtx?: SwitchProxyCtx;\n};\n\ntype GlobalState = {\n  proxies: ProxiesState;\n};\n\nexport const initialState: ProxiesState = {\n  proxies: {},\n  delay: {},\n  groupNames: [],\n  showModalClosePrevConns: false,\n};\n\nconst noop = () => null;\n\n// see all types:\n// https://github.com/Dreamacro/clash/blob/master/constant/adapters.go\n\n// const ProxyTypeBuiltin = ['DIRECT', 'GLOBAL', 'REJECT'];\n// const ProxyGroupTypes = ['Fallback', 'URLTest', 'Selector', 'LoadBalance'];\n// const ProxyTypes = ['Shadowsocks', 'Snell', 'Socks5', 'Http', 'Vmess'];\n\nexport const NonProxyTypes = [\n  'Direct',\n  'Fallback',\n  'Reject',\n  'Selector',\n  'URLTest',\n  'LoadBalance',\n  'Unknown',\n];\n\nexport const getProxies = (s: GlobalState) => s.proxies.proxies;\nexport const getDelay = (s: GlobalState) => s.proxies.delay;\nexport const getProxyGroupNames = (s: GlobalState) => s.proxies.groupNames;\nexport const getProxyProviders = (s: GlobalState) =>\n  s.proxies.proxyProviders || [];\nexport const getDangleProxyNames = (s: GlobalState) =>\n  s.proxies.dangleProxyNames;\nexport const getShowModalClosePrevConns = (s: GlobalState) =>\n  s.proxies.showModalClosePrevConns;\n\nexport function fetchProxies(apiConfig: ClashAPIConfig) {\n  return async (dispatch: any, getState: any) => {\n    const [proxiesData, providersData] = await Promise.all([\n      proxiesAPI.fetchProxies(apiConfig),\n      proxiesAPI.fetchProviderProxies(apiConfig),\n    ]);\n\n    const {\n      providers: proxyProviders,\n      proxies: providerProxies,\n    } = formatProxyProviders(providersData.providers);\n    const proxies = { ...providerProxies, ...proxiesData.proxies };\n    const [groupNames, proxyNames] = retrieveGroupNamesFrom(proxies);\n\n    const delayPrev = getDelay(getState());\n    const delayNext = { ...delayPrev };\n\n    for (let i = 0; i < proxyNames.length; i++) {\n      const name = proxyNames[i];\n      const { history } = proxies[name] || { history: [] };\n      const h = history[history.length - 1];\n      if (h && typeof h.delay === 'number') {\n        delayNext[name] = { number: h.delay };\n      }\n    }\n\n    // proxies that are not from a provider\n    const dangleProxyNames = [];\n    for (const v of proxyNames) {\n      if (!providerProxies[v]) dangleProxyNames.push(v);\n    }\n\n    dispatch('store/proxies#fetchProxies', (s: GlobalState) => {\n      s.proxies.proxies = proxies;\n      s.proxies.groupNames = groupNames;\n      s.proxies.delay = delayNext;\n      s.proxies.proxyProviders = proxyProviders;\n      s.proxies.dangleProxyNames = dangleProxyNames;\n    });\n  };\n}\n\nexport function updateProviderByName(apiConfig: ClashAPIConfig, name: string) {\n  return async (dispatch) => {\n    try {\n      await proxiesAPI.updateProviderByName(apiConfig, name);\n    } catch (x) {\n      // ignore\n    }\n    // should be optimized\n    // but ¯\\_(ツ)_/¯\n    dispatch(fetchProxies(apiConfig));\n  };\n}\n\nasync function healthcheckProviderByNameInternal(apiConfig, name) {\n  try {\n    await proxiesAPI.healthcheckProviderByName(apiConfig, name);\n  } catch (x) {\n    // ignore\n  }\n}\n\nexport function healthcheckProviderByName(apiConfig, name) {\n  return async (dispatch) => {\n    await healthcheckProviderByNameInternal(apiConfig, name);\n    // should be optimized\n    // but ¯\\_(ツ)_/¯\n    await dispatch(fetchProxies(apiConfig));\n  };\n}\n\nasync function closeGroupConns(\n  apiConfig: ClashAPIConfig,\n  groupName: string,\n  exceptionItemName: string\n) {\n  const res = await connAPI.fetchConns(apiConfig);\n  if (!res.ok) {\n    console.log('unable to fetch all connections', res.statusText);\n    /* throw new Error(); */\n  }\n  const json = await res.json();\n  const connections = json.connections;\n  const idsToClose = [];\n  for (const conn of connections) {\n    if (\n      // include the groupName\n      conn.chains.indexOf(groupName) > -1 &&\n      // but not include the itemName\n      conn.chains.indexOf(exceptionItemName) < 0\n    ) {\n      idsToClose.push(conn.id);\n    }\n  }\n\n  await Promise.all(\n    idsToClose.map((id) => connAPI.closeConnById(apiConfig, id).catch(noop))\n  );\n}\n\nfunction resolveChain(\n  proxies: ProxiesMapping,\n  groupName: string,\n  itemName: string\n) {\n  const chain = [itemName, groupName];\n\n  let child: ProxyItem;\n  let childKey = itemName;\n  while ((child = proxies[childKey]) && child.now) {\n    chain.unshift(child.now);\n    childKey = child.now;\n  }\n  return chain;\n}\n\nasync function switchProxyImpl(\n  dispatch: any,\n  getState: () => GlobalState,\n  apiConfig: ClashAPIConfig,\n  groupName: string,\n  itemName: string\n) {\n  try {\n    const res = await proxiesAPI.requestToSwitchProxy(\n      apiConfig,\n      groupName,\n      itemName\n    );\n    if (res.ok === false) {\n      throw new Error(`failed to switch proxy: res.statusText`);\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.log(err, 'failed to swith proxy');\n    throw err;\n  }\n\n  dispatch(fetchProxies(apiConfig));\n  const autoCloseOldConns = getAutoCloseOldConns(getState());\n  if (autoCloseOldConns) {\n    // use fresh state\n    const proxies = getProxies(getState());\n    // no wait\n    closePrevConns(apiConfig, proxies, { groupName, itemName });\n  }\n\n  /* dispatch('showModalClosePrevConns', (s: GlobalState) => { */\n  /*   s.proxies.showModalClosePrevConns = true; */\n  /*   s.proxies.switchProxyCtx = { to: { groupName, itemName } }; */\n  /* }); */\n}\n\nfunction closeModalClosePrevConns() {\n  return (dispatch) => {\n    dispatch('closeModalClosePrevConns', (s: GlobalState) => {\n      s.proxies.showModalClosePrevConns = false;\n    });\n  };\n}\n\nfunction closePrevConns(\n  apiConfig: ClashAPIConfig,\n  proxies: ProxiesMapping,\n  switchTo: SwitchProxyCtxItem\n) {\n  // we must have fetched the proxies before\n  // so the proxies here is fresh\n  /* const proxies = s.proxies.proxies; */\n  const chain = resolveChain(proxies, switchTo.groupName, switchTo.itemName);\n  closeGroupConns(apiConfig, switchTo.groupName, chain[0]);\n}\n\nfunction closePrevConnsAndTheModal(apiConfig: ClashAPIConfig) {\n  return async (dispatch, getState) => {\n    const s = getState();\n    const switchTo = s.proxies.switchProxyCtx?.to;\n    if (!switchTo) {\n      dispatch(closeModalClosePrevConns());\n      return;\n    }\n\n    // we must have fetched the proxies before\n    // so the proxies here is fresh\n    const proxies = s.proxies.proxies;\n    closePrevConns(apiConfig, proxies, switchTo);\n\n    dispatch('closePrevConnsAndTheModal', (s: GlobalState) => {\n      s.proxies.showModalClosePrevConns = false;\n      s.proxies.switchProxyCtx = undefined;\n    });\n  };\n}\n\nexport function switchProxy(apiConfig, groupName, itemName) {\n  return async (dispatch, getState) => {\n    // switch proxy asynchronously\n    switchProxyImpl(dispatch, getState, apiConfig, groupName, itemName).catch(\n      noop\n    );\n\n    // optimistic UI update\n    dispatch('store/proxies#switchProxy', (s) => {\n      const proxies = s.proxies.proxies;\n      if (proxies[groupName] && proxies[groupName].now) {\n        proxies[groupName].now = itemName;\n      }\n    });\n  };\n}\n\nfunction requestDelayForProxyOnce(apiConfig, name) {\n  return async (dispatch, getState) => {\n    const latencyTestUrl = getLatencyTestUrl(getState());\n    const res = await proxiesAPI.requestDelayForProxy(\n      apiConfig,\n      name,\n      latencyTestUrl\n    );\n    let error = '';\n    if (res.ok === false) {\n      error = res.statusText;\n    }\n    const { delay } = await res.json();\n\n    const delayPrev = getDelay(getState());\n    const delayNext = {\n      ...delayPrev,\n      [name]: {\n        error,\n        number: delay,\n      },\n    };\n\n    dispatch('requestDelayForProxyOnce', (s) => {\n      s.proxies.delay = delayNext;\n    });\n  };\n}\n\nexport function requestDelayForProxy(apiConfig, name) {\n  return async (dispatch) => {\n    await dispatch(requestDelayForProxyOnce(apiConfig, name));\n  };\n}\n\nexport function requestDelayForProxies(apiConfig, names) {\n  return async (dispatch, getState) => {\n    const proxyNames = getDangleProxyNames(getState());\n\n    const works = names\n      // remove names that are provided by proxy providers\n      .filter((p) => proxyNames.indexOf(p) > -1)\n      .map((p) => dispatch(requestDelayForProxy(apiConfig, p)));\n    await Promise.all(works);\n    await dispatch(fetchProxies(apiConfig));\n  };\n}\n\nexport function requestDelayAll(apiConfig) {\n  return async (dispatch, getState) => {\n    const proxyNames = getDangleProxyNames(getState());\n    await Promise.all(\n      proxyNames.map((p) => dispatch(requestDelayForProxy(apiConfig, p)))\n    );\n    const proxyProviders = getProxyProviders(getState());\n    // one by one\n    for (const p of proxyProviders) {\n      await healthcheckProviderByNameInternal(apiConfig, p.name);\n    }\n    await dispatch(fetchProxies(apiConfig));\n  };\n}\n\nfunction retrieveGroupNamesFrom(proxies) {\n  let groupNames = [];\n  let globalAll;\n  const proxyNames = [];\n  for (const prop in proxies) {\n    const p = proxies[prop];\n    if (p.all && Array.isArray(p.all)) {\n      groupNames.push(prop);\n      if (prop === 'GLOBAL') {\n        globalAll = p.all;\n      }\n    } else if (NonProxyTypes.indexOf(p.type) < 0) {\n      proxyNames.push(prop);\n    }\n  }\n  if (globalAll) {\n    // Put GLOBAL in the end\n    globalAll.push('GLOBAL');\n    // Sort groups according to its index in GLOBAL group\n    groupNames = groupNames\n      .map((name) => [globalAll.indexOf(name), name])\n      .sort((a, b) => a[0] - b[0])\n      .map((group) => group[1]);\n  }\n  return [groupNames, proxyNames];\n}\n\ntype ProvidersRaw = {\n  [key: string]: ProxyProvider;\n};\n\nfunction formatProxyProviders(\n  providersInput: ProvidersRaw\n): {\n  providers: Array<FormattedProxyProvider>;\n  proxies: { [key: string]: ProxyItem };\n} {\n  const keys = Object.keys(providersInput);\n  const providers = [];\n  const proxies = {};\n  for (let i = 0; i < keys.length; i++) {\n    const provider: ProxyProvider = providersInput[keys[i]];\n    if (provider.name === 'default' || provider.vehicleType === 'Compatible') {\n      continue;\n    }\n    const proxiesArr = provider.proxies;\n    const names = [];\n    for (let j = 0; j < proxiesArr.length; j++) {\n      const proxy = proxiesArr[j];\n      proxies[proxy.name] = proxy;\n      names.push(proxy.name);\n    }\n\n    // mutate directly\n    provider.proxies = names;\n    providers.push(provider);\n  }\n\n  return {\n    providers,\n    proxies,\n  };\n}\n\nexport const actions = {\n  requestDelayForProxies,\n  closeModalClosePrevConns,\n  closePrevConnsAndTheModal,\n};\n\nexport const proxyFilterText = atom({\n  key: 'proxyFilterText',\n  default: '',\n});\n","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"_2ueF0jmjym\",\"content\":\"UZ5fqyDCOb\"};","var startup = __webpack_require__.x;\n__webpack_require__.x = () => {\n\tvar result = startup();\n\t[180,331,170,869,641,237,981,507,497,736].map(__webpack_require__.E);\n\treturn result;\n};"],"sourceRoot":""}