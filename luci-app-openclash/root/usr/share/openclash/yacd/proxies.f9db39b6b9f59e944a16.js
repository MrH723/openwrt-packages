(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/Uh6":function(e,t,n){e.exports={proxyLatency:"_1GlyjMFCSf"}},"0tMl":function(e,t,n){e.exports={topBar:"_2adLhYLrrV",topBarRight:"_1gc_yljm7w",textFilterContainer:"_1N0wXB7TV7",group:"_35E6rdJlPT",spining:"_3NWc4-pcFT",spining_keyframes:"_2zZyX5N3wc"}},"5JRb":function(e,t,n){e.exports={labeledInput:"_1tkxMBL44k"}},"9cvt":function(e,t,n){"use strict";n.d(t,"c",(function(){return r}));n("U20h");var a=n("cq0i");n.d(t,"b",(function(){return a.b})),n.d(t,"a",(function(){return a.a}));var r={right:10,bottom:10}},DsEz:function(e,t,n){e.exports={input:"_1I0EXOg8Vu"}},LhcJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ODXe"),r=n("hbEN"),c=n("q1tI"),l=n("dBaT"),o=c.useCallback,i=c.useState,u=c.useMemo;function s(e){var t=Object(l.useRecoilState)(e),n=Object(a.a)(t,2)[1],c=i(""),s=Object(a.a)(c,2),m=s[0],p=s[1],d=u((function(){return Object(r.a)(n,300)}),[n]);return[o((function(e){p(e.target.value),d(e.target.value)}),[d]),m]}},MR5J:function(e,t,n){e.exports={FlexCenter:"_1NNIVhRL-n"}},RL2M:function(e,t,n){e.exports={header:"_2qbBB1Sojw",arrow:"_1iuVspxe4f",isOpen:"_2CN_S7POBQ",btn:"_3504uhlYv5",qty:"_3Vynmp3NK4"}},U20h:function(e,t,n){},UVHL:function(e,t,n){e.exports={select:"_2epoA7G8CQ"}},UmKA:function(e,t,n){e.exports={overlay:"_25Hedjekvk",cnt:"_1tfU5GSa-_",afterOpen:"_2VMuy-HWwC"}},agpB:function(e,t,n){e.exports={updatedAt:"_113att7Ifr",body:"_26mH_RmGnl",actionFooter:"_2cXcxGEUNI",refresh:"_2NjdAt9CvG"}},drH3:function(e,t,n){e.exports={list:"_1pPZyUDtdp",listSummaryView:"_6uXcWV1Myk"}},kCV3:function(e,t,n){"use strict";n.r(t);n("2B1R");var a=n("ODXe"),r=n("q1tI"),c=n.n(r),l=n("ySHw"),o=n("OADI"),i=n("GmYy"),u=n("n57c"),s=n("DKqX"),m=n("iuhU"),p=n("9rZX"),d=n.n(p),f=n("Z9Yo"),v=n.n(f),y=n("UmKA"),b=n.n(y),E=r.useMemo;function h(e){var t=e.isOpen,n=e.onRequestClose,a=e.children,c=E((function(){return{base:Object(m.a)(v.a.content,b.a.cnt),afterOpen:b.a.afterOpen,beforeClose:""}}),[]);return r.createElement(d.a,{isOpen:t,onRequestClose:n,className:c,overlayClassName:Object(m.a)(v.a.overlay,b.a.overlay)},a)}var O=n("9cvt"),C=n("WfPo");function x(e){var t=e.color,n=void 0===t?"currentColor":t,a=e.size,c=void 0===a?24:a;return r.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:c,height:c,stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"M2 6h9M18.5 6H22"}),r.createElement("circle",{cx:"16",cy:"6",r:"2"}),r.createElement("path",{d:"M22 18h-9M6 18H2"}),r.createElement("circle",{r:"2",transform:"matrix(-1 0 0 1 8 18)"}))}var g=n("MR5J"),w=n.n(g);function k(e){var t=e.children;return r.createElement("div",{className:w.a.FlexCenter},t)}var j=r.useRef,N=r.useEffect;function S(e){var t=e.onClickPrimaryButton,n=e.onClickSecondaryButton,a=j(null),c=j(null);N((function(){a.current.focus()}),[]);return r.createElement("div",{onKeyDown:function(e){39===e.keyCode?c.current.focus():37===e.keyCode&&a.current.focus()}},r.createElement("h2",null,"Close Connections?"),r.createElement("p",null,'Click "Yes" to close those connections that are still using the old selected proxy in this group'),r.createElement("div",{style:{height:30}}),r.createElement(k,null,r.createElement(u.a,{onClick:t,ref:a},"Yes"),r.createElement("div",{style:{width:20}}),r.createElement(u.a,{onClick:n,ref:c},"No")))}var _=n("0tMl"),B=n.n(_),M=n("o0o1"),A=n.n(M),L=(n("ls82"),n("HaE+")),P=n("j7o3"),U=n("RL2M"),R=n.n(U),D=n("riol");function T(e){var t=e.name,n=e.type,a=e.toggle,c=e.isOpen,l=e.qty,o=r.useCallback((function(e){e.preventDefault(),"Enter"!==e.key&&" "!==e.key||a()}),[a]);return r.createElement("div",{className:R.a.header,onClick:a,style:{cursor:"pointer"},tabIndex:0,onKeyDown:o,role:"button"},r.createElement("div",null,r.createElement(D.b,{name:t,type:n})),"number"==typeof l?r.createElement("span",{className:R.a.qty},l):null,r.createElement(u.a,{kind:"minimal",onClick:a,className:R.a.btn},r.createElement("span",{className:Object(m.a)(R.a.arrow,{[R.a.isOpen]:c})},r.createElement(P.a,{size:20}))))}n("TeQF"),n("yXV3"),n("ToJy"),n("EnZy"),n("SYor");var I=n("KQm4"),H=n("dBaT"),V=r.useMemo;var q=function(e,t){if(e&&"number"==typeof e.number&&e.number>0)return e.number;var n=t&&t.type;return n&&i.a.indexOf(n)>-1?-1:999999},K={Natural:function(e){return e},LatencyAsc:function(e,t,n){return e.sort((function(e,a){return q(t[e],n&&n[e])-q(t[a],n&&n[a])}))},LatencyDesc:function(e,t,n){return e.sort((function(e,a){var r=q(t[e],n&&n[e]);return q(t[a],n&&n[a])-r}))},NameAsc:function(e){return e.sort()},NameDesc:function(e){return e.sort((function(e,t){return e>t?-1:e<t?1:0}))}};function z(e,t,n,r,c){var l=Object(H.useRecoilState)(i.k),o=Object(a.a)(l,1)[0];return V((function(){return function(e,t,n,a,r,c){var l=Object(I.a)(e);return n&&(l=function(e,t){return e.filter((function(e){var n=t[e];return void 0===n||0!==n.number}))}(e,t)),"string"==typeof a&&""!==a&&(l=function(e,t){var n=t.toLowerCase().split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e}));return 0===n.length?e:e.filter((function(e){for(var t=0;t<n.length;t++){var a=n[t];if(e.toLowerCase().indexOf(a)>-1)return!0}return!1}))}(l,a)),K[r](l,t,c)}(e,t,n,o,r,c)}),[e,t,n,o,r,c])}var F=n("xKoM"),Y=n.n(F),J=13,X=n("wztZ"),Z=n.n(X),G=n("/Uh6"),W=n.n(G);function Q(e){var t=e.number,n=e.color;return r.createElement("span",{className:W.a.proxyLatency,style:{color:n}},r.createElement("span",null,t," ms"))}var $=r.useMemo,ee="#67c23a",te="#d4b75c",ne="#e67f3c",ae="#909399";function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.number;return 0===t?ae:t<200?ee:t<400?te:"number"==typeof t?ne:ae}var ce=function(e,t){var n=t.name,a=Object(i.e)(e),r=Object(i.d)(e);return{proxy:a[n],latency:r[n]}},le=Object(C.a)(ce)((function(e){var t=e.now,n=e.name,a=e.proxy,c=e.latency,l=e.isSelectable,o=e.onClick,i=$((function(){return re(c)}),[c]),u=r.useCallback((function(){l&&o&&o(n)}),[n,o,l]),s=r.useCallback((function(e){e.keyCode===J&&u()}),[u]),p=$((function(){return Object(m.a)(Z.a.proxy,{[Z.a.now]:t,[Z.a.error]:c&&c.error,[Z.a.selectable]:l})}),[l,t,c]);return r.createElement("div",{tabIndex:0,className:p,onClick:u,onKeyDown:s,role:l?"menuitem":""},r.createElement("div",{className:Z.a.proxyName},n),r.createElement("div",{className:Z.a.row},r.createElement("span",{className:Z.a.proxyType,style:{opacity:t?.6:.2}},a.type),c&&c.number?r.createElement(Q,{number:c.number,color:i}):null))})),oe=Object(C.a)(ce)((function(e){var t=e.now,n=e.name,a=e.proxy,c=e.latency,l=e.isSelectable,o=e.onClick,u=$((function(){return function(e,t){return i.a.indexOf(t)>-1?"linear-gradient(135deg, white 15%, #999 15% 30%, white 30% 45%, #999 45% 60%, white 60% 75%, #999 75% 90%, white 90% 100%)":re(e)}(c,a.type)}),[c,a]),s=$((function(){var e=n;return c&&"number"==typeof c.number&&(e+=" "+c.number+" ms"),e}),[n,c]),p=r.useCallback((function(){l&&o&&o(n)}),[n,o,l]),d=$((function(){return Object(m.a)(Z.a.proxySmall,{[Z.a.now]:t,[Z.a.selectable]:l})}),[l,t]),f=r.useCallback((function(e){e.keyCode===J&&p()}),[p]);return r.createElement("div",{title:s,className:d,style:{background:u},onClick:p,onKeyDown:f,role:l?"menuitem":""})})),ie=n("drH3"),ue=n.n(ie);function se(e){var t=e.all,n=e.now,a=e.isSelectable,c=e.itemOnTapCallback,l=t;return r.createElement("div",{className:ue.a.list},l.map((function(e){return r.createElement(le,{key:e,onClick:c,isSelectable:a,name:e,now:e===n})})))}function me(e){var t=e.all,n=e.now,a=e.isSelectable,c=e.itemOnTapCallback;return r.createElement("div",{className:ue.a.listSummaryView},t.map((function(e){return r.createElement(oe,{key:e,onClick:c,isSelectable:a,name:e,now:e===n})})))}var pe=r.createElement,de=r.useCallback,fe=r.useMemo,ve=r.useState;function ye(){return r.createElement("div",{className:Y.a.zapWrapper},r.createElement(l.a,{size:16}))}var be=Object(C.a)((function(e,t){var n=t.name,a=t.delay,r=Object(i.e)(e),c=Object(o.d)(e),l=Object(o.g)(e),u=Object(o.e)(e),s=r[n];return{all:s.all,delay:a,hideUnavailableProxies:u,proxySortBy:l,proxies:r,type:s.type,now:s.now,isOpen:c["proxyGroup:"+n]}}))((function(e){var t=e.name,n=e.all,c=e.delay,l=e.hideUnavailableProxies,o=e.proxySortBy,s=e.proxies,m=e.type,p=e.now,d=e.isOpen,f=e.apiConfig,v=e.dispatch,y=z(n,c,l,o,s),b=fe((function(){return"Selector"===m}),[m]),E=Object(C.c)(),h=E.app.updateCollapsibleIsOpen,O=E.proxies.requestDelayForProxies,x=de((function(){h("proxyGroup",t,!d)}),[d,h,t]),g=de((function(e){b&&v(Object(i.m)(f,t,e))}),[f,v,t,b]),w=ve(!1),k=Object(a.a)(w,2),j=k[0],N=k[1],S=de(Object(L.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,O(f,y);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:N(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),[y,f,O]);return r.createElement("div",{className:Y.a.group},r.createElement("div",{style:{display:"flex",alignItems:"center"}},r.createElement(T,{name:t,type:m,toggle:x,qty:y.length,isOpen:d}),r.createElement(u.a,{kind:"minimal",onClick:S,isLoading:j},r.createElement(ye,null))),pe(d?se:me,{all:y,now:p,isSelectable:b,itemOnTapCallback:g}))})),Ee=n("FVam"),he=n("ZMKu"),Oe=n("OAQO"),Ce=n("bdgK"),xe=c.a.memo,ge=c.a.useState,we=c.a.useRef,ke=c.a.useEffect;var je={initialOpen:{height:"auto",transition:{duration:0}},open:function(e){return{height:e,opacity:1,visibility:"visible",transition:{duration:.3}}},closed:{height:0,opacity:0,visibility:"hidden",transition:{duration:.3}}},Ne={open:{x:0},closed:{x:20}},Se=xe((function(e){var t,n,r=e.children,l=e.isOpen,o=(t=l,n=we(),ke((function(){n.current=t}),[t]),n.current),i=function(){var e=we(),t=ge({height:0}),n=Object(a.a)(t,2),r=n[0],c=n[1];return ke((function(){var t=new Ce.a((function(e){var t=Object(a.a)(e,1)[0];return c(t.contentRect)}));return e.current&&t.observe(e.current),function(){return t.disconnect()}}),[]),[e,r]}(),u=Object(a.a)(i,2),s=u[0],m=u[1].height;return c.a.createElement("div",null,c.a.createElement(he.a.div,{animate:l&&o===l?"initialOpen":l?"open":"closed",custom:m,variants:je},c.a.createElement(he.a.div,{variants:Ne,ref:s},r)))})),_e=n("agpB"),Be=n.n(_e),Me=r.useState,Ae=r.useCallback;var Le={rest:{scale:1},pressed:{scale:.95}},Pe={rest:{rotate:0},hover:{rotate:360,transition:{duration:.3}}};function Ue(){return r.createElement(he.a.div,{className:Be.a.refresh,variants:Le,initial:"rest",whileHover:"hover",whileTap:"pressed"},r.createElement(he.a.div,{className:"flexCenter",variants:Pe},r.createElement(Oe.a,{size:16})))}var Re=Object(C.a)((function(e,t){var n=t.proxies,a=t.name,r=Object(o.e)(e),c=Object(i.d)(e),l=Object(o.d)(e);return{apiConfig:Object(o.c)(e),proxies:n,delay:c,hideUnavailableProxies:r,proxySortBy:Object(o.g)(e),isOpen:l["proxyProvider:"+a]}}))((function(e){var t=e.name,n=e.proxies,c=e.delay,o=e.hideUnavailableProxies,s=e.proxySortBy,m=e.vehicleType,p=e.updatedAt,d=e.isOpen,f=e.dispatch,v=e.apiConfig,y=z(n,c,o,s),b=Me(!1),E=Object(a.a)(b,2),h=E[0],O=E[1],x=Ae((function(){return f(Object(i.n)(v,t))}),[v,f,t]),g=Ae(Object(L.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,f(Object(i.i)(v,t));case 3:O(!1);case 4:case"end":return e.stop()}}),e)}))),[v,f,t,O]),w=Object(C.c)().app.updateCollapsibleIsOpen,k=Ae((function(){w("proxyProvider",t,!d)}),[d,w,t]),j=Object(Ee.a)(new Date(p),new Date);return r.createElement("div",{className:Be.a.body},r.createElement(T,{name:t,toggle:k,type:m,isOpen:d,qty:y.length}),r.createElement("div",{className:Be.a.updatedAt},r.createElement("small",null,"Updated ",j," ago")),r.createElement(Se,{isOpen:d},r.createElement(se,{all:y}),r.createElement("div",{className:Be.a.actionFooter},r.createElement(u.a,{text:"Update",start:r.createElement(Ue,null),onClick:x}),r.createElement(u.a,{text:"Health Check",start:r.createElement(l.a,{size:16}),onClick:g,isLoading:h}))),r.createElement(Se,{isOpen:!d},r.createElement(me,{all:y})))}));function De(e){var t=e.items;return 0===t.length?null:r.createElement(r.Fragment,null,r.createElement(s.a,{title:"Proxy Provider"}),r.createElement("div",null,t.map((function(e){return r.createElement(Re,{key:e.name,name:e.name,proxies:e.proxies,type:e.type,vehicleType:e.vehicleType,updatedAt:e.updatedAt})}))))}var Te=n("UVHL"),Ie=n.n(Te);function He(e){var t=e.options,n=e.selected,c=e.onChange;return r.createElement("select",{className:Ie.a.select,value:n,onChange:c},t.map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return r.createElement("option",{key:n,value:n},c)})))}var Ve=n("hkBY"),qe=n("5JRb"),Ke=n.n(qe),ze=[["Natural","Original order in config file"],["LatencyAsc","By latency from small to big"],["LatencyDesc","By latency from big to small"],["NameAsc","By name alphabetically (A-Z)"],["NameDesc","By name alphabetically (Z-A)"]],Fe=r.useCallback;var Ye=Object(C.a)((function(e){return{appConfig:{proxySortBy:Object(o.g)(e),hideUnavailableProxies:Object(o.e)(e),autoCloseOldConns:Object(o.b)(e)}}}))((function(e){var t=e.appConfig,n=Object(C.c)().app.updateAppConfig,a=Fe((function(e){n("proxySortBy",e.target.value)}),[n]),c=Fe((function(e){n("hideUnavailableProxies",e)}),[n]);return r.createElement(r.Fragment,null,r.createElement("div",{className:Ke.a.labeledInput},r.createElement("span",null,"Sorting in group"),r.createElement("div",null,r.createElement(He,{options:ze,selected:t.proxySortBy,onChange:a}))),r.createElement("hr",null),r.createElement("div",{className:Ke.a.labeledInput},r.createElement("span",null,"Hide unavailable proxies"),r.createElement("div",null,r.createElement(Ve.a,{name:"hideUnavailableProxies",checked:t.hideUnavailableProxies,onChange:c}))),r.createElement("div",{className:Ke.a.labeledInput},r.createElement("span",null,"Automatically close old connections"),r.createElement("div",null,r.createElement(Ve.a,{name:"autoCloseOldConns",checked:t.autoCloseOldConns,onChange:function(e){return n("autoCloseOldConns",e)}}))))})),Je=n("LhcJ"),Xe=n("DsEz"),Ze=n.n(Xe);function Ge(){var e=Object(Je.a)(i.k),t=Object(a.a)(e,2),n=t[0],c=t[1];return r.createElement("input",{className:Ze.a.input,type:"text",value:c,onChange:n})}var We=r.useState,Qe=r.useEffect,$e=r.useCallback,et=r.useRef;function tt(){return r.createElement("div",{className:B.a.spining,style:{width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center"}},r.createElement(l.a,{width:16,height:16}))}t.default=Object(C.a)((function(e){return{apiConfig:Object(o.c)(e),groupNames:Object(i.f)(e),proxyProviders:Object(i.g)(e),delay:Object(i.d)(e),showModalClosePrevConns:Object(i.h)(e)}}))((function(e){var t=e.dispatch,n=e.groupNames,c=e.delay,o=e.proxyProviders,m=e.apiConfig,p=e.showModalClosePrevConns,d=et({}),f=We(!1),v=Object(a.a)(f,2),y=v[0],b=v[1],E=$e((function(){y||(b(!0),t(Object(i.l)(m)).then((function(){return b(!1)}),(function(){return b(!1)})))}),[m,t,y]),g=$e((function(){d.current.startAt=Date.now(),t(Object(i.c)(m)).then((function(){d.current.completeAt=Date.now()}))}),[m,t]);Qe((function(){g();var e=function(){d.current.startAt&&Date.now()-d.current.startAt>3e4&&g()};return window.addEventListener("focus",e,!1),function(){return window.removeEventListener("focus",e,!1)}}),[g]);var w=We(!1),k=Object(a.a)(w,2),j=k[0],N=k[1],_=$e((function(){N(!1)}),[]),M=Object(C.c)().proxies,A=M.closeModalClosePrevConns,L=M.closePrevConnsAndTheModal;return r.createElement(r.Fragment,null,r.createElement(h,{isOpen:j,onRequestClose:_},r.createElement(Ye,null)),r.createElement("div",{className:B.a.topBar},r.createElement(s.a,{title:"Proxies"}),r.createElement("div",{className:B.a.topBarRight},r.createElement("div",{className:B.a.textFilterContainer},r.createElement(Ge,null)),r.createElement(u.a,{kind:"minimal",onClick:function(){return N(!0)}},r.createElement(x,{size:16})))),r.createElement("div",null,n.map((function(e){return r.createElement("div",{className:B.a.group,key:e},r.createElement(be,{name:e,delay:c,apiConfig:m,dispatch:t}))}))),r.createElement(De,{items:o}),r.createElement("div",{style:{height:60}}),r.createElement(O.b,{icon:y?r.createElement(tt,null):r.createElement(l.a,{width:16,height:16}),onClick:E,text:"Test Latency",position:O.c}),r.createElement(h,{isOpen:p,onRequestClose:A},r.createElement(S,{onClickPrimaryButton:function(){return L(m)},onClickSecondaryButton:A})))}))},wztZ:function(e,t,n){e.exports={proxy:"_5-kOJyYfSn",now:"MbWebw2VH4",error:"_2dlAYgAIKi",selectable:"_3rB1UgDAL6",proxyType:"nnjdzHZySt",row:"_2E11-huRp7",proxyName:"_2Eys6UMXCm",proxySmall:"_2rRGWVNOYC"}},xKoM:function(e,t,n){e.exports={header:"v5oNKUwcTc",zapWrapper:"_2fR1H0ysyY"}}}]);
//# sourceMappingURL=proxies.f9db39b6b9f59e944a16.js.map