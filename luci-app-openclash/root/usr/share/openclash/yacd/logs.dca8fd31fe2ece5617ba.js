(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Kv4h:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("ODXe"),a=r("q1tI"),o=r.n(a),c=o.a.useState,l=o.a.useRef,i=o.a.useCallback,s=o.a.useLayoutEffect;function u(){var e=l(null),t=c(200),r=Object(n.a)(t,2),a=r[0],o=r[1],u=i((function(){var t=e.current.getBoundingClientRect().top;o(window.innerHeight-t)}),[]);return s((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[u]),[e,a]}},OA2e:function(e,t,r){e.exports={RuleSearch:"_2QPZldYe9U",RuleSearchContainer:"_2PCUI90lIf",inputWrapper:"xOYTLnYrng",input:"_1JKQs_Qawx",iconWrapper:"_2km92h_dfH"}},RLOP:function(e,t,r){e.exports={logMeta:"_3rlaagQhmO",logType:"_1Y8l2FW3db",logTime:"_3RhnPkHfE2",logText:"o1S9cV4T0R",logsWrapper:"_3GIdCSyyS7",log:"lUDfnPiNdD",logPlaceholder:"PaFzglKCf5",logPlaceholderIcon:"_29b6nIu_GY"}},aTX5:function(e,t,r){"use strict";r.r(t);r("pNMO"),r("TeQF"),r("QWBl"),r("27RR"),r("FZtP");var n=r("ODXe"),a=r("rePB"),o=r("iuhU"),c=r("17x9"),l=r.n(c),i=r("q1tI"),s=r.n(i),u=r("iR1w"),f=(r("07d7"),r("5s+n"),r("JfAA"),r("EnZy"),r("YrXW"));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d,v,b,O=new TextDecoder("utf-8"),m=!1,h=!1,y="";function j(e,t){var r;try{r=JSON.parse(e)}catch(t){console.log("JSON.parse error",JSON.parse(e))}var n=new Date,a=n.toLocaleString("zh-Hans");r.time=a,r.id=+n-0+Math.floor(65536*(1+Math.random())).toString(16),r.even=m=!m,t(r)}function w(e,t){if(!h&&1!==b){b=1;var r=Object(f.a)(e,"/logs"),n=new WebSocket(r);n.addEventListener("error",(function(){return b=3})),n.addEventListener("close",(function(r){b=3,function(e,t){if(!v||d.baseURL===e.baseURL&&d.secret===e.secret&&d.logLevel===e.logLevel){if(h)return}else v.abort();h=!0,d=g({},e);var r=(v=new AbortController).signal,n=Object(f.b)(e),a=n.url,o=n.init;fetch(a+"/logs?level="+e.logLevel,g(g({},o),{},{signal:r})).then((function(e){!function e(t,r){return t.read().then((function(n){for(var a=n.done,o=n.value,c=O.decode(o,{stream:!a}),l=(y+=c).split("\n"),i=l[l.length-1],s=0;s<l.length-1;s++)j(l[s],r);return a?(j(i,r),y="",console.log("GET /logs streaming done"),void(h=!1)):(y=i,e(t,r))}))}(e.body.getReader(),t)}),(function(e){h=!1,r.aborted||console.log("GET /logs error:",e.message)}))}(e,t)})),n.addEventListener("message",(function(e){j(e.data,t)}))}}var E=r("Kv4h"),P=r("OADI"),S=r("vJea"),x=r("+FPD"),L=r("DKqX"),N=r("RLOP"),T=r.n(N),D=r("hbEN");function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var C=Object(i.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,a=e.size,o=void 0===a?24:a,c=k(e,["color","size"]);return s.a.createElement("svg",R({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),s.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));C.propTypes={color:l.a.string,size:l.a.oneOfType([l.a.string,l.a.number])},C.displayName="Search";var W=C,_=r("OA2e"),I=r.n(_);var z=function(e){var t=e.dispatch,r=e.searchText,a=e.updateSearchText,o=Object(i.useState)(r),c=Object(n.a)(o,2),l=c[0],u=c[1],f=Object(i.useCallback)((function(e){t(a(e))}),[t,a]),p=Object(i.useMemo)((function(){return Object(D.a)(f,300)}),[f]);return s.a.createElement("div",{className:I.a.RuleSearch},s.a.createElement("div",{className:I.a.RuleSearchContainer},s.a.createElement("div",{className:I.a.inputWrapper},s.a.createElement("input",{type:"text",value:l,onChange:function(e){u(e.target.value),p(e.target.value)},className:I.a.input})),s.a.createElement("div",{className:I.a.iconWrapper},s.a.createElement(W,{size:20}))))},J=r("WfPo"),U=Object(J.a)((function(e){return{searchText:Object(x.c)(e),updateSearchText:x.e}}))(z),A=r("VVUS");function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=s.a.useCallback,Y=s.a.memo,B=s.a.useEffect,F={debug:"none",info:"#454545",warning:"#b99105",error:"#c11c1c"};function X(e){var t=e.time,r=e.even,n=e.payload,a=e.type,c=Object(o.a)({even:r},T.a.log);return s.a.createElement("div",{className:c},s.a.createElement("div",{className:T.a.logMeta},s.a.createElement("div",{className:T.a.logTime},t),s.a.createElement("div",{className:T.a.logType,style:{backgroundColor:F[a]}},a),s.a.createElement("div",{className:T.a.logText},n)))}function G(e,t){return t[e].id}X.propTypes={time:l.a.string,even:l.a.bool,payload:l.a.string,type:l.a.string};var H=Y((function(e){var t=e.index,r=e.style,n=e.data[t];return s.a.createElement("div",{style:r},s.a.createElement(X,n))}),u.c);t.default=Object(J.a)((function(e){return{logs:Object(x.b)(e),logLevel:Object(S.c)(e),apiConfig:Object(P.c)(e)}}))((function(e){var t=e.dispatch,r=e.logLevel,a=e.apiConfig,o=e.logs,c=Q((function(e){t(Object(x.a)(e))}),[t]);B((function(){w(M(M({},a),{},{logLevel:r}),c)}),[a,r,c]);var l=Object(E.a)(),i=Object(n.a)(l,2),f=i[0],p=i[1];return s.a.createElement("div",null,s.a.createElement(L.a,{title:"Logs"}),s.a.createElement(U,null),s.a.createElement("div",{ref:f,style:{paddingBottom:30}},0===o.length?s.a.createElement("div",{className:T.a.logPlaceholder,style:{height:p-30}},s.a.createElement("div",{className:T.a.logPlaceholderIcon},s.a.createElement(A.a,{width:200,height:200})),s.a.createElement("div",null,"No logs yet, hang tight...")):s.a.createElement("div",{className:T.a.logsWrapper},s.a.createElement(u.a,{height:p-30,width:"100%",itemCount:o.length,itemSize:80,itemData:o,itemKey:G},H))))}))}}]);
//# sourceMappingURL=logs.dca8fd31fe2ece5617ba.js.map