(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Kv4h:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("ODXe"),a=r("q1tI"),o=r.n(a),c=o.a.useState,l=o.a.useRef,i=o.a.useCallback,s=o.a.useLayoutEffect;function u(){var e=l(null),t=c(200),r=Object(n.a)(t,2),a=r[0],o=r[1],u=i((function(){var t=e.current.getBoundingClientRect().top;o(window.innerHeight-t)}),[]);return s((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[u]),[e,a]}},OA2e:function(e,t,r){e.exports={RuleSearch:"_2QPZldYe9U",RuleSearchContainer:"_2PCUI90lIf",inputWrapper:"xOYTLnYrng",input:"_1JKQs_Qawx",iconWrapper:"_2km92h_dfH"}},RLOP:function(e,t,r){e.exports={logMeta:"_3rlaagQhmO",logType:"_1Y8l2FW3db",logTime:"_3RhnPkHfE2",logText:"o1S9cV4T0R",logsWrapper:"_3GIdCSyyS7",log:"lUDfnPiNdD",logPlaceholder:"PaFzglKCf5",logPlaceholderIcon:"_29b6nIu_GY"}},aTX5:function(e,t,r){"use strict";r.r(t);r("pNMO"),r("TeQF"),r("QWBl"),r("27RR"),r("FZtP");var n=r("ODXe"),a=r("rePB"),o=r("iuhU"),c=r("17x9"),l=r.n(c),i=r("q1tI"),s=r.n(i),u=r("iR1w"),f=(r("07d7"),r("5s+n"),r("JfAA"),r("EnZy"),r("YrXW"));function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d,v,b,O="/logs",m=new TextDecoder("utf-8"),h=!1,y=!1,j="";function w(e,t){var r;try{r=JSON.parse(e)}catch(t){console.log("JSON.parse error",JSON.parse(e))}var n=new Date,a=n.toLocaleString("zh-Hans");r.time=a,r.id=+n-0+Math.floor(65536*(1+Math.random())).toString(16),r.even=h=!h,t(r)}function E(e,t){return e.read().then((function(r){for(var n=r.done,a=r.value,o=m.decode(a,{stream:!n}),c=(j+=o).split("\n"),l=c[c.length-1],i=0;i<c.length-1;i++)w(c[i],t);return n?(w(l,t),j="",console.log("GET /logs streaming done"),void(y=!1)):(j=l,E(e,t))}))}function P(e,t){if(!y&&1!==b){b=1;var r=Object(f.a)(e,O),n=new WebSocket(r);n.addEventListener("error",(function(){return b=3})),n.addEventListener("close",(function(r){b=3,function(e,t){if(!v||d.baseURL===e.baseURL&&d.secret===e.secret&&d.logLevel===e.logLevel){if(y)return}else v.abort();y=!0,d=g({},e);var r=(v=new AbortController).signal,n=Object(f.b)(e),a=n.url,o=n.init;fetch(a+O+"?level="+e.logLevel,g(g({},o),{},{signal:r})).then((function(e){E(e.body.getReader(),t)}),(function(e){y=!1,r.aborted||console.log("GET /logs error:",e.message)}))}(e,t)})),n.addEventListener("message",(function(e){w(e.data,t)}))}}var S=r("Kv4h"),x=r("OADI"),L=r("vJea"),N=r("+FPD"),T=r("DKqX"),D=r("RLOP"),R=r.n(D),k=r("hbEN");function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var _=Object(i.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,a=e.size,o=void 0===a?24:a,c=W(e,["color","size"]);return s.a.createElement("svg",C({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),s.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));_.propTypes={color:l.a.string,size:l.a.oneOfType([l.a.string,l.a.number])},_.displayName="Search";var I=_,z=r("OA2e"),J=r.n(z);var U=function(e){var t=e.dispatch,r=e.searchText,a=e.updateSearchText,o=Object(i.useState)(r),c=Object(n.a)(o,2),l=c[0],u=c[1],f=Object(i.useCallback)((function(e){t(a(e))}),[t,a]),p=Object(i.useMemo)((function(){return Object(k.a)(f,300)}),[f]);return s.a.createElement("div",{className:J.a.RuleSearch},s.a.createElement("div",{className:J.a.RuleSearchContainer},s.a.createElement("div",{className:J.a.inputWrapper},s.a.createElement("input",{type:"text",value:l,onChange:function(e){u(e.target.value),p(e.target.value)},className:J.a.input})),s.a.createElement("div",{className:J.a.iconWrapper},s.a.createElement(I,{size:20}))))},A=r("WfPo"),K=Object(A.a)((function(e){return{searchText:Object(N.c)(e),updateSearchText:N.e}}))(U),M=r("VVUS");function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=s.a.useCallback,F=s.a.memo,X=s.a.useEffect,G={debug:"none",info:"#454545",warning:"#b99105",error:"#c11c1c"};function H(e){var t=e.time,r=e.even,n=e.payload,a=e.type,c=Object(o.a)({even:r},R.a.log);return s.a.createElement("div",{className:c},s.a.createElement("div",{className:R.a.logMeta},s.a.createElement("div",{className:R.a.logTime},t),s.a.createElement("div",{className:R.a.logType,style:{backgroundColor:G[a]}},a),s.a.createElement("div",{className:R.a.logText},n)))}function q(e,t){return t[e].id}H.propTypes={time:l.a.string,even:l.a.bool,payload:l.a.string,type:l.a.string};var V=F((function(e){var t=e.index,r=e.style,n=e.data[t];return s.a.createElement("div",{style:r},s.a.createElement(H,n))}),u.c);t.default=Object(A.a)((function(e){return{logs:Object(N.b)(e),logLevel:Object(L.c)(e),apiConfig:Object(x.c)(e)}}))((function(e){var t=e.dispatch,r=e.logLevel,a=e.apiConfig,o=e.logs,c=B((function(e){t(Object(N.a)(e))}),[t]);X((function(){P(Y(Y({},a),{},{logLevel:r}),c)}),[a,r,c]);var l=Object(S.a)(),i=Object(n.a)(l,2),f=i[0],p=i[1];return s.a.createElement("div",null,s.a.createElement(T.a,{title:"Logs"}),s.a.createElement(K,null),s.a.createElement("div",{ref:f,style:{paddingBottom:30}},0===o.length?s.a.createElement("div",{className:R.a.logPlaceholder,style:{height:p-30}},s.a.createElement("div",{className:R.a.logPlaceholderIcon},s.a.createElement(M.a,{width:200,height:200})),s.a.createElement("div",null,"No logs yet, hang tight...")):s.a.createElement("div",{className:R.a.logsWrapper},s.a.createElement(u.a,{height:p-30,width:"100%",itemCount:o.length,itemSize:80,itemData:o,itemKey:q},V))))}))}}]);
//# sourceMappingURL=logs.cc50e5d3455225682ee1.js.map